{"version":3,"sources":["HuCardLayer.js"],"names":["GameDefs","require","GameCfg","cc","Class","extends","Component","properties","onLoad","init","onDestroy","m_outMjs","Array","m_playerMj","playFaGuangEffects","bIsPlaying","playerNode","node","getChildByName","whosTurnNode","nCount","cbHuCount","m_nPos","x","y","active","dragonDisplay","getComponent","dragonBones","ArmatureDisplay","playAnimation","self","callback","removeEventListener","EventObject","COMPLETE","addEventListener","setPlayerMj","playerMj","setPlayerPos","nPos","putHuMj","outMjValue","console","log","addSelfHuCard","addRightHuCard","addTopHuCard","addLeftHuCard","getLastHuCard","huCardsNode","children","outCardCount","i","childrenCount","removeAllChildren","spriteFrame","parent","get_face_dao_spriteFrame","cbHuCards","Sprite","cardValue","get_face_z_SpriteFrame","get_face_y_SpriteFrame","doCards","setAllOutCardIsVis","bIsVis","gameOver","cleanAllMjs"],"mappings":"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","file":"HuCardLayer.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\scripts\\hall\\game\\desk","sourcesContent":["var GameDefs = require(\"GameDefs\");\r\n\r\nimport { TSCommon } from \"../../TSCommon\";\r\nvar GameCfg = require(\"GameCfg\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\r\n    },\r\n\r\n    onLoad: function () {\r\n\r\n        this.init();\r\n\r\n    },\r\n\r\n    onDestroy: function () {\r\n    },\r\n\r\n\r\n    init: function () {\r\n        this.m_outMjs = new Array();\r\n        this.m_playerMj = new Array();\r\n    },\r\n\r\n    playFaGuangEffects: function (bIsPlaying) {\r\n        var playerNode = this.node.getChildByName(\"hupai_eff_node\");\r\n        var whosTurnNode = playerNode.getChildByName(\"hupai_light_act\");\r\n        // var mjNode = this.getLastHuCard();\r\n        // var convetPos = this.node.convertToNodeSpace(cc.p(mjNode.getPosition()));\r\n        // whosTurnNode.x = convetPos.x;\r\n        // whosTurnNode.y = convetPos.y;\r\n        // console.log(\"胡牌的坐标：\"+whosTurnNode.x+\"==============\"+whosTurnNode.y)\r\n        var nCount = this.m_playerMj.cbHuCount;\r\n        if (this.m_nPos == 1) {\r\n            if (nCount == 1){\r\n                whosTurnNode.x = 241;\r\n                whosTurnNode.y = -221;\r\n            }else if (nCount == 2){\r\n                whosTurnNode.x = 289;\r\n                whosTurnNode.y = -221;\r\n            }else if (nCount == 3){\r\n                whosTurnNode.x = 337;\r\n                whosTurnNode.y = -221;\r\n            }else if (nCount == 4){\r\n                whosTurnNode.x = 381;\r\n                whosTurnNode.y = -221;\r\n            }else if (nCount == 5){\r\n                whosTurnNode.x = 428;\r\n                whosTurnNode.y = -221;\r\n            }else if (nCount == 6){\r\n                whosTurnNode.x = 475;\r\n                whosTurnNode.y = -221;\r\n            }else if (nCount == 7){\r\n                whosTurnNode.x = 241;\r\n                whosTurnNode.y = -199;\r\n            }else if (nCount == 8){\r\n                whosTurnNode.x = 289;\r\n                whosTurnNode.y = -199;\r\n            }else if (nCount == 9){\r\n                whosTurnNode.x = 337;\r\n                whosTurnNode.y = -199;\r\n            }else if (nCount == 10){\r\n                whosTurnNode.x = 381;\r\n                whosTurnNode.y = -199;\r\n            }else if (nCount == 11){\r\n                whosTurnNode.x = 428;\r\n                whosTurnNode.y = -199;\r\n            }else if (nCount == 12){\r\n                whosTurnNode.x = 475;\r\n                whosTurnNode.y = -199;\r\n            }\r\n\r\n        }\r\n        else if (this.m_nPos == 2) {\r\n            if (nCount == 1){\r\n                whosTurnNode.x = 419;\r\n                whosTurnNode.y = 305;\r\n            }else if (nCount == 2){\r\n                whosTurnNode.x = 421;\r\n                whosTurnNode.y = 283;\r\n            }else if (nCount == 3){\r\n                whosTurnNode.x = 423;\r\n                whosTurnNode.y = 260;\r\n            }else if (nCount == 4){\r\n                whosTurnNode.x = 384;\r\n                whosTurnNode.y = 305;\r\n            }else if (nCount == 5){\r\n                whosTurnNode.x = 386;\r\n                whosTurnNode.y = 283;\r\n            }else if (nCount == 6){\r\n                whosTurnNode.x = 387;\r\n                whosTurnNode.y = 259;\r\n            }else if (nCount == 7){\r\n                whosTurnNode.x = 421;\r\n                whosTurnNode.y = 315;\r\n            }else if (nCount == 8){\r\n                whosTurnNode.x = 423;\r\n                whosTurnNode.y = 292;\r\n            }else if (nCount == 9){\r\n                whosTurnNode.x = 425;\r\n                whosTurnNode.y = 269;\r\n            }else if (nCount == 10){\r\n                whosTurnNode.x = 385;\r\n                whosTurnNode.y = 316;\r\n            }else if (nCount == 11){\r\n                whosTurnNode.x = 387;\r\n                whosTurnNode.y = 293;\r\n            }else if (nCount == 12){\r\n                whosTurnNode.x = 389;\r\n                whosTurnNode.y = 270;\r\n            }\r\n        }\r\n        else if (this.m_nPos == 3) {\r\n            if (nCount == 1){\r\n                whosTurnNode.x = -359;\r\n                whosTurnNode.y = 270;\r\n            }else if (nCount == 2){\r\n                whosTurnNode.x = -331;\r\n                whosTurnNode.y = 270;\r\n            }else if (nCount == 3){\r\n                whosTurnNode.x = -302;\r\n                whosTurnNode.y = 270;\r\n            }else if (nCount == 4){\r\n                whosTurnNode.x = -273;\r\n                whosTurnNode.y = 270;\r\n            }else if (nCount == 5){\r\n                whosTurnNode.x = -245;\r\n                whosTurnNode.y = 270;\r\n            }else if (nCount == 6){\r\n                whosTurnNode.x = -217;\r\n                whosTurnNode.y = 270;\r\n            }else if (nCount == 7){\r\n                whosTurnNode.x = -359;\r\n                whosTurnNode.y = 282;\r\n            }else if (nCount == 8){\r\n                whosTurnNode.x = -331;\r\n                whosTurnNode.y = 282;\r\n            }else if (nCount == 9){\r\n                whosTurnNode.x = -302;\r\n                whosTurnNode.y = 282;\r\n            }else if (nCount == 10){\r\n                whosTurnNode.x = -273;\r\n                whosTurnNode.y = 282;\r\n            }else if (nCount == 11){\r\n                whosTurnNode.x = -245;\r\n                whosTurnNode.y = 282;\r\n            }else if (nCount == 12){\r\n                whosTurnNode.x = -217;\r\n                whosTurnNode.y = 282;\r\n            }\r\n        }\r\n        else if (this.m_nPos == 4) {\r\n            if (nCount == 1){\r\n                whosTurnNode.x = -448;\r\n                whosTurnNode.y = -142;\r\n            }else if (nCount == 2){\r\n                whosTurnNode.x = -450;\r\n                whosTurnNode.y = -172;\r\n            }else if (nCount == 3){\r\n                whosTurnNode.x = -453;\r\n                whosTurnNode.y = -204;\r\n            }else if (nCount == 4){\r\n                whosTurnNode.x = -399;\r\n                whosTurnNode.y = -142;\r\n            }else if (nCount == 5){\r\n                whosTurnNode.x = -401;\r\n                whosTurnNode.y = -172;\r\n            }else if (nCount == 6){\r\n                whosTurnNode.x = -404;\r\n                whosTurnNode.y = -204;\r\n            }else if (nCount == 7){\r\n                whosTurnNode.x = -452;\r\n                whosTurnNode.y = -126;\r\n            }else if (nCount == 8){\r\n                whosTurnNode.x = -454;\r\n                whosTurnNode.y = -156;\r\n            }else if (nCount == 9){\r\n                whosTurnNode.x = -456;\r\n                whosTurnNode.y = -188;\r\n            }else if (nCount == 10){\r\n                whosTurnNode.x = -403;\r\n                whosTurnNode.y = -126;\r\n            }else if (nCount == 11){\r\n                whosTurnNode.x = -406;\r\n                whosTurnNode.y = -156;\r\n            }else if (nCount == 12){\r\n                whosTurnNode.x = -408;\r\n                whosTurnNode.y = -188;\r\n            }\r\n        }\r\n\r\n        if (bIsPlaying) {\r\n            whosTurnNode.active = true;\r\n            var dragonDisplay = whosTurnNode.getComponent(dragonBones.ArmatureDisplay);\r\n            dragonDisplay.playAnimation('Animation1');\r\n            // console.log(\"胡牌特效播放完成！！！\")\r\n            var self = this;\r\n            var callback = function () {\r\n                self.playFaGuangEffects(false);\r\n                dragonDisplay.removeEventListener(dragonBones.EventObject.COMPLETE, callback, self);\r\n            }\r\n    \r\n            dragonDisplay.addEventListener(dragonBones.EventObject.COMPLETE, callback, this)\r\n        }\r\n        else {\r\n            // whosTurnNode.removeComponent(dragonBones.ArmatureDisplay);\r\n            whosTurnNode.active = false;\r\n        }\r\n\r\n    },\r\n\r\n    setPlayerMj:function (playerMj) {\r\n        this.m_playerMj = playerMj;\r\n    },\r\n\r\n    setPlayerPos: function (nPos) {\r\n        this.m_nPos = nPos;\r\n    },\r\n\r\n    putHuMj: function (outMjValue) {\r\n        console.log(\"下面是存储的胡牌数据：\")\r\n        console.log(this.m_playerMj)\r\n        if (this.m_nPos == 1) {\r\n            this.addSelfHuCard(outMjValue);\r\n        }\r\n        else if (this.m_nPos == 2) {\r\n            this.addRightHuCard(outMjValue);\r\n        }\r\n        else if (this.m_nPos == 3) {\r\n            this.addTopHuCard(outMjValue);\r\n        }\r\n        else if (this.m_nPos == 4) {\r\n            this.addLeftHuCard(outMjValue);\r\n        }\r\n    },\r\n\r\n    getLastHuCard: function () {\r\n        var huCardsNode = this.node.getChildByName(\"hucards\");\r\n        return huCardsNode.children[this.m_playerMj.cbHuCount - 1];\r\n    },\r\n\r\n    addSelfHuCard: function (outMjValue) {\r\n        var outCardCount = this.m_playerMj.cbHuCount;\r\n        var huCardsNode = this.node.getChildByName(\"hucards\");\r\n\r\n        for (var i = 0; i < huCardsNode.childrenCount; i++) {\r\n            huCardsNode.children[i].active = false;\r\n        }\r\n\r\n        for (var i = 0; i < outCardCount; i++) {\r\n            if (huCardsNode.children[i]) {\r\n                // var spriteFrameName = this.getSpriteFrameNameByMjValue(1, this.m_playerMj.cbHuCards[i]);\r\n                huCardsNode.children[i].removeAllChildren();\r\n                var spriteFrame = this.node.parent.getComponent(\"MjResourceMgr\").get_face_dao_spriteFrame(\"mj1\", this.m_playerMj.cbHuCards[i]);\r\n                huCardsNode.children[i].getComponent(cc.Sprite).spriteFrame = spriteFrame;\r\n                huCardsNode.children[i].active = true;\r\n                huCardsNode.children[i].cardValue = this.m_playerMj.cbHuCards[i];\r\n                if (outMjValue) {\r\n                    // \r\n                    this.playFaGuangEffects(true)\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    addLeftHuCard: function (outMjValue) {\r\n        var outCardCount = this.m_playerMj.cbHuCount;\r\n        var huCardsNode = this.node.getChildByName(\"hucards\");\r\n\r\n        for (var i = 0; i < huCardsNode.childrenCount; i++) {\r\n            huCardsNode.children[i].active = false;\r\n        }\r\n\r\n\r\n        for (var i = 0; i < outCardCount; i++) {\r\n            if (huCardsNode.children[i]) {\r\n                // var spriteFrameName = this.getSpriteFrameNameByMjValue(1, this.m_playerMj.cbHuCards[i]);\r\n                huCardsNode.children[i].removeAllChildren();\r\n                var spriteFrame = this.node.parent.getComponent(\"MjResourceMgr\").get_face_z_SpriteFrame(\"mj1\", this.m_playerMj.cbHuCards[i]);\r\n                huCardsNode.children[i].getComponent(cc.Sprite).spriteFrame = spriteFrame;\r\n                huCardsNode.children[i].active = true;\r\n                huCardsNode.children[i].cardValue = this.m_playerMj.cbHuCards[i];\r\n                if (outMjValue) {\r\n                    \r\n                    this.playFaGuangEffects(true)\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    addTopHuCard: function (outMjValue) {\r\n        var outCardCount = this.m_playerMj.cbHuCount;\r\n        var huCardsNode = this.node.getChildByName(\"hucards\");\r\n\r\n        for (var i = 0; i < huCardsNode.childrenCount; i++) {\r\n            huCardsNode.children[i].active = false;\r\n        }\r\n\r\n\r\n        for (var i = 0; i < outCardCount; i++) {\r\n            if (huCardsNode.children[i]) {\r\n                // var spriteFrameName = this.getSpriteFrameNameByMjValue(1, this.m_playerMj.cbHuCards[i]);\r\n                huCardsNode.children[i].removeAllChildren();\r\n                var spriteFrame = this.node.parent.getComponent(\"MjResourceMgr\").get_face_dao_spriteFrame(\"mj1\", this.m_playerMj.cbHuCards[i]);\r\n                huCardsNode.children[i].getComponent(cc.Sprite).spriteFrame = spriteFrame;\r\n                huCardsNode.children[i].active = true;\r\n                huCardsNode.children[i].cardValue = this.m_playerMj.cbHuCards[i];\r\n                if (outMjValue) {\r\n                    \r\n                    this.playFaGuangEffects(true)\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    addRightHuCard: function (outMjValue) {\r\n        var outCardCount = this.m_playerMj.cbHuCount;\r\n        var huCardsNode = this.node.getChildByName(\"hucards\");\r\n\r\n        for (var i = 0; i < huCardsNode.childrenCount; i++) {\r\n            huCardsNode.children[i].active = false;\r\n        }\r\n\r\n\r\n        for (var i = 0; i < outCardCount; i++) {\r\n            if (huCardsNode.children[i]) {\r\n                // var spriteFrameName = this.getSpriteFrameNameByMjValue(1, this.m_playerMj.cbHuCards[i]);\r\n                huCardsNode.children[i].removeAllChildren();\r\n                var spriteFrame = this.node.parent.getComponent(\"MjResourceMgr\").get_face_y_SpriteFrame(\"mj1\", this.m_playerMj.cbHuCards[i]);\r\n                huCardsNode.children[i].getComponent(cc.Sprite).spriteFrame = spriteFrame;\r\n                huCardsNode.children[i].active = true;\r\n                huCardsNode.children[i].cardValue = this.m_playerMj.cbHuCards[i];\r\n                if (outMjValue) {\r\n                    \r\n                    this.playFaGuangEffects(true)\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    doCards: function () {\r\n        if (this.m_nPos == 1) {\r\n            this.addSelfHuCard();\r\n        }\r\n        else if (this.m_nPos == 2) {\r\n            this.addRightHuCard();\r\n        }\r\n        else if (this.m_nPos == 3) {\r\n            this.addTopHuCard();\r\n        }\r\n        else if (this.m_nPos == 4) {\r\n            this.addLeftHuCard();\r\n        }\r\n    },\r\n\r\n    //设定所有出的牌的可见性\r\n    setAllOutCardIsVis: function (bIsVis) {\r\n        var outCardCount = this.m_playerMj.cbHuCount;\r\n\r\n        var huCardsNode = this.node.getChildByName(\"hucards\");\r\n\r\n        for (var i = 0; i < huCardsNode.childrenCount; i++) {\r\n            huCardsNode.children[i].active = false;\r\n        }\r\n\r\n        for (var i = 0; i < outCardCount; i++) {\r\n            huCardsNode.children[i].active = bIsVis;\r\n        }\r\n    },\r\n\r\n    gameOver: function () {\r\n        this.setAllOutCardIsVis();\r\n    },\r\n\r\n    cleanAllMjs: function () {\r\n        this.setAllOutCardIsVis(false);\r\n    }\r\n});\r\n"]}