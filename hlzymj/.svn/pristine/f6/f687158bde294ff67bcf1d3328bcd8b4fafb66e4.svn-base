{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\scripts\\hall\\game\\desk/assets\\scripts\\hall\\game\\desk\\EatOrGangSelectLayer.js"],"names":["GameDefs","require","Resources","cc","Class","extends","Component","properties","bgNode","default","type","Sprite","init","operateKind","operateData","callBack","spriteFrame","m_operateKind","m_operateData","m_callBack","m_spriteFrame","node","on","Node","EventType","TOUCH_END","onTouch","event","PlayerAction","paEat","sendCMD_PO_EAT","paGang","sendCMD_PO_GANG","nGangCard","nGangType","log","getFrameNameByValue","mjValue","foreName","name","get_frameName","MAX_MJ_INDEX","showUI","cardDataArray","Array","selectBg","getChildByName","i","push","childrenCount","children","getComponent","getSpriteFrame"],"mappings":"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","file":"EatOrGangSelectLayer.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\scripts\\hall\\game\\desk","sourcesContent":["var GameDefs = require(\"GameDefs\");\r\nvar Resources = require(\"Resources\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        bgNode:{\r\n            default:null,\r\n            type:cc.Sprite,\r\n        }\r\n    },\r\n\r\n    init(operateKind, operateData, callBack, spriteFrame){\r\n        this.m_operateKind = operateKind;\r\n        this.m_operateData = operateData;\r\n        this.m_callBack = callBack;\r\n        this.m_spriteFrame = spriteFrame;\r\n\r\n        this.node.on(cc.Node.EventType.TOUCH_END, this.onTouch, this)\r\n    },\r\n\r\n    onTouch:function(event){\r\n        if(this.m_operateKind == GameDefs.PlayerAction.paEat){\r\n            require(\"sendCMD\").sendCMD_PO_EAT(this.m_operateData[3])\r\n        }\r\n        else if(this.m_operateKind == GameDefs.PlayerAction.paGang){\r\n            require(\"sendCMD\").sendCMD_PO_GANG(this.m_operateData.nGangCard, this.m_operateData.nGangType)\r\n        }\r\n        else{\r\n            cc.log(\"this.m_operateKind is error\");\r\n        }\r\n\r\n        if(this.m_callBack != null){\r\n            this.m_callBack();\r\n        }  \r\n    },\r\n\r\n    getFrameNameByValue(mjValue){\r\n        var foreName = \"\";\r\n        var name = \"\";\r\n        if(this.m_operateKind == GameDefs.PlayerAction.paGang){\r\n            foreName = \"hh_dao_\"\r\n        }\r\n        else if(this.m_operateKind == GameDefs.PlayerAction.paEat){\r\n            foreName = \"hh_li_\" \r\n        }\r\n        else{\r\n            cc.log(\"no other more operate\");\r\n        }\r\n\r\n       name = Resources.get_frameName(foreName, mjValue);\r\n\r\n        if(mjValue == GameDefs.MAX_MJ_INDEX && this.m_operateKind == GameDefs.PlayerAction.paGang){\r\n            name = foreName + \"back\"\r\n        }\r\n\r\n        return name;\r\n    },\r\n\r\n    showUI:function(){\r\n\r\n        var cardDataArray = new Array();\r\n        var selectBg = this.node.getChildByName(\"selectBg\");\r\n        if(this.m_operateKind == GameDefs.PlayerAction.paGang){\r\n            for(var i = 0; i < 3; i++){\r\n                cardDataArray[i] = GameDefs.MAX_MJ_INDEX;\r\n            }\r\n\r\n            cardDataArray.push(this.m_operateData.nGangCard);\r\n        }\r\n        else{\r\n            for(var i = 0; i < 3; i++){\r\n                cardDataArray[i] = this.m_operateData[i];\r\n            }\r\n        }\r\n\r\n\r\n        for(var i = 0; i < selectBg.childrenCount; i++){\r\n            var mjValue = cardDataArray[i];\r\n            selectBg.children[i].getComponent(cc.Sprite).spriteFrame = this.m_spriteFrame.getSpriteFrame(this.getFrameNameByValue(mjValue));\r\n        }\r\n    },\r\n \r\n});\r\n"]}