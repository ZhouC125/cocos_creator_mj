{"version":3,"sources":["CGameLib.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\scripts\\hall\\gamelib","sourcesContent":["﻿import { TSCommon } from \"../TSCommon\";\r\nimport { GameRoom } from \"./room/GameRoom\";\r\nimport { GamePlace } from \"./place/GamePlace\";\r\nimport { ClientFrame } from \"./frame/ClientFrame\";\r\nimport { IClientFrameSink } from \"./IClientFrameSink\";\r\nimport { ByteArray } from \"../common/ByteArray\";\r\nimport { CDefaultGameLibSink } from \"./CDefaultGameLibSink\";\r\nimport { Domain } from \"../Domain\";\r\nimport PublicUserInfo = require(\"../PublicUserInfo\");\r\nimport { tagClientInfo } from \"./tagClientInfo\";\r\nimport { tagVersionInfo } from \"./tagVersionInfo\";\r\nimport { tagConnectInfo } from \"./tagConnectInfo\";\r\nimport { tagGameStationEx } from \"./tagGameStationEx\";\r\nimport { tagGameServerEx } from \"./tagGameServerEx\";\r\n\r\nexport class CGameLib {\r\n    private _gamePlace: GamePlace;\r\n    private _gameRoom: GameRoom;\r\n    private _clientframeSink;\r\n    private _nGameID: number;\r\n    private _gameVersion: number;\r\n    private _publicUserInfo: PublicUserInfo;\r\n    private _sink;\r\n    private _defaultSink;\r\n    public ClientInfo: tagClientInfo;\r\n    public VersionInfo: tagVersionInfo;\r\n    public ConnectInfo: tagConnectInfo;\r\n    private static _instance: CGameLib;\r\n    public static getInstance() {\r\n        if (this._instance)\r\n            return this._instance;\r\n            console.log(\"创建gamelib .......\")\r\n        this._instance = new CGameLib();\r\n        return this._instance;\r\n    }\r\n\r\n    private constructor() {\r\n        this.ClientInfo = new tagClientInfo();\r\n        this.VersionInfo = new tagVersionInfo();\r\n        this.ConnectInfo = new tagConnectInfo();\r\n    }\r\n\r\n    public createByHall(publicUserInfo, logonIP, logonPort) {\r\n        this._publicUserInfo = publicUserInfo;\r\n        this._gameVersion = 1;\r\n        this._defaultSink = new CDefaultGameLibSink();\r\n        this._sink = this._defaultSink;\r\n\r\n        this._gamePlace = new GamePlace(this, publicUserInfo);\r\n        this._gameRoom = new GameRoom(this, publicUserInfo);\r\n\r\n        this.setPlazaPort(logonPort);\r\n        this.setPlazaIP(logonIP);\r\n        this._gamePlace.setSink(this._sink);\r\n        this.getGameInfo();\r\n    }\r\n\r\n\r\n    public createGamelib(nGameID: number, nGameVersion: number, pGameLibSink, pClientFrameSink,\r\n        nPartnerID: number, nClientVersion: number, logonIP: string, logonPort: number, webRoot: string) {\r\n        if (!pGameLibSink)\r\n            pGameLibSink = this._sink;\r\n\r\n        this._sink = pGameLibSink;\r\n        this._nGameID = nGameID;\r\n        this._gameVersion = nGameVersion;\r\n\r\n        this._gameRoom.setSink(this._sink);\r\n        this._gameRoom.setClientFrameSink(pClientFrameSink);\r\n        this._gamePlace.setSink(pGameLibSink);\r\n        this._gamePlace.setGameID(nGameID);\r\n\r\n        this.setWebRoot(webRoot)\r\n        this._gamePlace.loginGame();\r\n    }\r\n\r\n    public backToHall() {\r\n        this._sink = this._defaultSink\r\n        this._gameRoom.setSink(this._sink)\r\n        this._gameRoom.setClientFrameSink(null)\r\n        this._gamePlace.setSink(this._sink)\r\n        this._gamePlace.setGameID(0)\r\n    }\r\n\r\n    public setPlazaIP(plazaIP: string) {\r\n        this._gamePlace.setServerIP(plazaIP);\r\n    }\r\n\r\n    public setPlazaPort(port: number) {\r\n        this._gamePlace.setPort(port);\r\n    }\r\n\r\n    public getGameInfo() {\r\n        return this._gamePlace.getGameInfo();\r\n    }\r\n\r\n    public setWebRoot(webRoot: string) {\r\n        this._gamePlace.setWebRoot(webRoot);\r\n    }\r\n\r\n    public getUserLogonInfo() {\r\n        return this._gamePlace.getUserLoginInfo();\r\n    }\r\n\r\n    public getGameStation(stationID: number): tagGameStationEx {\r\n        return this._gamePlace.getGameStation(stationID);\r\n    }\r\n\r\n    public getGameServer(gameserverID: number) {\r\n        return this._gamePlace.getGameServer(gameserverID);\r\n    }\r\n\r\n    public getStationList() {\r\n        return this._gamePlace.getStationList();\r\n    }\r\n\r\n    public getGameServerList(stationID: number) {\r\n        return this._gamePlace.getGameServerList(stationID);\r\n    }\r\n\r\n    public getAllGameServerList() {\r\n        return this._gamePlace.getAllGameServerList();\r\n    }\r\n\r\n    public enterGameRoom(roomID: number): string {\r\n        var gameServer: tagGameServerEx = this.getGameServer(roomID);\r\n        if (gameServer == null)\r\n            return \"\";\r\n        if (!this._gameRoom.enterGameRoom(gameServer,\r\n            this._publicUserInfo.userDBID, this._publicUserInfo.encryptPassword, this._gameVersion))\r\n            return \"\";\r\n        return gameServer.szGameRoomName;\r\n    }\r\n\r\n    public autoEnterGameRoom(station: string): string {\r\n        var room = this._gamePlace.getAutoEnterRoom(station);\r\n        if (room != null) {\r\n            TSCommon.log(\"autoEnterGameRoom \" + room.szGameRoomName);\r\n            this.enterGameRoom(room.dwServerID);\r\n            var pStation = this._gamePlace.getGameStation(room.dwStationID);\r\n            if (pStation) {\r\n                return pStation.szStationName;\r\n            }\r\n            return room.szGameRoomName\r\n        }\r\n        TSCommon.log(\"autoEnterGameRoom 找不到对应的房间 \" + station + \",id = \" + this._nGameID);\r\n        return \"\";\r\n    }\r\n\r\n    public enterGameRoomByIP(ipaddress: string, port: number){\r\n\r\n        return this._gameRoom.enterGameRoomByIP(ipaddress, port, this._publicUserInfo.userDBID, this._publicUserInfo.encryptPassword, \r\n            this._gameVersion, this._gamePlace.getServerByIPAndPort(ipaddress, port));\r\n    }\r\n\r\n    public leaveGameRoom() {\r\n        this._gameRoom.leftRoom();\r\n    }\r\n\r\n    public getMyself() {\r\n        return this._gameRoom.getMyself();\r\n    }\r\n\r\n\r\n    public getUser(wUserID: number) {\r\n        return this._gameRoom.getUser(wUserID);\r\n    }\r\n\r\n    public getUserByDBID(dwUserDBID: number) {\r\n        return this._gameRoom.getUserByDBID(dwUserDBID);\r\n    }\r\n\r\n\r\n    public sitTable(tableID: number, cbChair: number) {\r\n        if (this._nGameID == 125) {\r\n            return this._gameRoom.sendWatchMessage(0, 0);\r\n        }\r\n\r\n        return this._gameRoom.enterTable(tableID, cbChair);\r\n    }\r\n\r\n    public autoSit() {\r\n        TSCommon.log(\"autoSit gameid = \" + this._nGameID);\r\n        if (this._nGameID == 88) {\r\n            return this._gameRoom.sendWatchMessage(0, 0);\r\n        }\r\n        return this._gameRoom.autoSit();\r\n    }\r\n\r\n    public isPlaying() {\r\n        var p = this.getMyself();\r\n        if (p == null) {\r\n            return false;\r\n        }\r\n        return p.isPlayer();\r\n    }\r\n\r\n    public sendGameCmd(cbCmdID: number, data: ByteArray) {\r\n        return this._gameRoom.sendGameCmd(cbCmdID, data);\r\n    }\r\n\r\n    public sendReadyCmd() {\r\n        return this._gameRoom.sendReady();\r\n    }\r\n\r\n    public sendCancelReadyCmd() {\r\n        return this._gameRoom.sendCancelReady();\r\n    }\r\n\r\n    public getUserByChair(cbChair: number) {\r\n        return this._gameRoom.getUserByChair(cbChair);\r\n    }\r\n\r\n    public sendCommand(cbMainCmd: number, cbSubCmd: number, data: ByteArray) {\r\n        return this._gameRoom.sendCommand(cbMainCmd, cbSubCmd, 0, data);\r\n    }\r\n\r\n    public sendOldCmd(cbCmdID: number, data: ByteArray) {\r\n        return this._gameRoom.sendOldGameCmd(cbCmdID, data);\r\n    }\r\n\r\n    public setClientFrameSink(sink: IClientFrameSink) {\r\n        this._clientframeSink = sink;\r\n        this._gameRoom.setClientFrameSink(sink);\r\n    }\r\n\r\n    public standUp() {\r\n        this._gameRoom.standup();\r\n    }\r\n\r\n    public getCurrentGameRoom() {\r\n        return this._gameRoom.getCurrentGameRoom();\r\n    }\r\n\r\n    public isInPrivateRoom(){\r\n        if(this._gameRoom.isServicing()){\r\n            return this._gameRoom.isPrivteRoom();\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    public watch(t: number, c: number) {\r\n        this._gameRoom.sendWatchMessage(t, c);\r\n    }\r\n\r\n    public sendTableChat(lpszMsg: string) {\r\n        return this._gameRoom.sendTableChat(lpszMsg);\r\n    }\r\n\r\n    public getRelativePos(cbChair: number) {\r\n        if (!this._gameRoom.isServicing()) {\r\n            return cbChair;\r\n        }\r\n        return this._gameRoom.getRelativePos(cbChair);\r\n    }\r\n\r\n    public getRealChair(cbPos: number) {\r\n        if (!this._gameRoom.isServicing()) {\r\n            return cbPos;\r\n        }\r\n        return this._gameRoom.getRealChair(cbPos);\r\n    }\r\n    public formatMoney(lMoney: number) {\r\n        var ret = null;\r\n        var bNegative = false;\r\n        if (lMoney < 0) { bNegative = true; }\r\n\r\n        var lValue = Math.abs(lMoney);\r\n\r\n        if (lValue < 10000) {\r\n            var lpsz = (bNegative ? \"-\" : \"\") + lValue;\r\n            return lpsz;\r\n        }\r\n        if (lValue < 100000000) {\r\n            return bNegative ? \"-\" : \"\" + lValue / 10000 + lValue % 10000;\r\n        }\r\n\r\n        return bNegative ? \"-\" : \"\" + lValue / 100000000 + (lValue % 100000000) / 10000 + lValue % 10000;\r\n    }\r\n    //获取我的网络延时\r\n    public getNetLag() {\r\n        return this._gameRoom.getNetLag();\r\n    }\r\n\r\n    //获取桌子列表\r\n    public GetTableList() {\r\n        return this._gameRoom.getTableList();\r\n    }\r\n\r\n    //获取桌子\r\n    public getTable(tableID) {\r\n        return this._gameRoom.getTable(tableID);\r\n    }\r\n    public getUserList() {\r\n        return this._gameRoom.getUserList();\r\n    }\r\n\r\n\r\n    public sendVoice(voiceData: ByteArray) {\r\n        this._gameRoom.sendSoundToTableUser(voiceData);\r\n    }\r\n\r\n    public isServicing() {\r\n        return this._gameRoom.isServicing();\r\n    }\r\n\r\n    public refreshGold() {\r\n        //cclog(\"CGameLibLua:refreshGold()\")\r\n        if (this._gameRoom != null && this._gameRoom.isServicing())\r\n            this._gameRoom.refreshGold();\r\n\r\n        //this._gamePlace.getUserGameInfo();\r\n    }\r\n    public getStationOnlineCount(nStationID){\r\n        return this._gamePlace.getStationOnlineCount(nStationID)\r\n    }\r\n}\r\n"]}