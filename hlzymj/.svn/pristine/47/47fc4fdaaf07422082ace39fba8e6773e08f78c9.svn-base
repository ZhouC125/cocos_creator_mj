{"version":3,"sources":["CCButton.js"],"names":["CCButton","cc","Class","extends","Component","nodeButton","_callBack","_normalUrl","_pressUrl","_bIsMove","objectData","ctor","properties","buttonLabel","default","type","Label","normalSprite","Sprite","pressSprite","disSprite","onLoad","Node","node","addChild","addComponent","spriteFrame","nodePressSp","nodeLabel","string","enabled","addTouchEvent","self","on","EventType","TOUCH_START","touch","event","TOUCH_MOVE","TOUCH_END","poistion","getLocation","locationInNode","convertToNodeSpace","s","getBoundingBox","rect","width","height","rectContainsPoint","scaleAction","scaleTo","scaleActionBack","seqAction","sequence","callFunc","runAction","TOUCH_CANCEL","start","update","dt","onDestroy","setBtnCallBack","onBtnCallBack","setPosition","x","y","p","setBtnLabelStr","str","setObjectData","getObjectData","setCCButton","normalUrl","pressUrl","onClickCallBack","loader","loadRes","SpriteFrame","error","spriteframe","module","exports"],"mappings":"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","file":"CCButton.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\scripts\\hall\\control","sourcesContent":["\r\nvar CCButton = cc.Class({\r\n    extends: cc.Component,\r\n    nodeButton:null,\r\n    _callBack:null,\r\n    _normalUrl:null,\r\n    _pressUrl:null,\r\n    _bIsMove:false,\r\n    objectData:null,\r\n    ctor:function()\r\n    {   \r\n    },\r\n    properties: {\r\n        buttonLabel:{\r\n            default:null,\r\n            type:cc.Label,\r\n        },\r\n        normalSprite:{\r\n            default:null,\r\n            type:cc.Sprite,\r\n        },\r\n        pressSprite:{\r\n            default:null,\r\n            type:cc.Sprite,\r\n        },\r\n        disSprite:{\r\n            default:null,\r\n            type:cc.Sprite,\r\n        },\r\n    },\r\n    onLoad:function(){\r\n\r\n        this.nodeButton = new cc.Node('nodeButton');\r\n        this.node.addChild(this.nodeButton);\r\n\r\n        this.normalSprite = this.nodeButton.addComponent('cc.Sprite');\r\n        this.normalSprite.spriteFrame = null;\r\n\r\n        var nodePressSp = new cc.Node('nodePressSp');\r\n        this.pressSprite = nodePressSp.addComponent('cc.Sprite');\r\n        this.pressSprite.spriteFrame = null;\r\n        this.nodeButton.addChild(nodePressSp);\r\n\r\n        var nodeLabel = new cc.Node('nodeLabel');\r\n        this.buttonLabel = nodeLabel.addComponent('cc.Label');\r\n        this.buttonLabel.string=\"Button\";\r\n        this.buttonLabel.enabled = false;\r\n        this.nodeButton.addChild(nodeLabel);\r\n\r\n        this.addTouchEvent();\r\n        \r\n     },\r\n\r\n    addTouchEvent:function()\r\n    {   \r\n        var self = this;\r\n        this.nodeButton.on(cc.Node.EventType.TOUCH_START, function (touch,event) {\r\n        }, this);\r\n\r\n        this.nodeButton.on(cc.Node.EventType.TOUCH_MOVE, function(touch ,event) {\r\n            self._bIsMove = true;\r\n        }, this);\r\n\r\n        this.nodeButton.on(cc.Node.EventType.TOUCH_END, function(touch,event) {\r\n            var poistion = touch.getLocation();\r\n            var locationInNode = this.nodeButton.convertToNodeSpace(poistion);    \r\n            var s = this.nodeButton.getBoundingBox();\r\n            var rect = cc.rect(0, 0, s.width, s.height);\r\n\r\n            // this is a temp api which will be combined to cc.Node\r\n            if (cc.rectContainsPoint(rect, locationInNode)) {\r\n                var scaleAction = cc.scaleTo(0.05, 1.1, 1.1);\r\n                var scaleActionBack = cc.scaleTo(0.05, 1, 1);\r\n                var seqAction = cc.sequence(scaleAction,scaleActionBack,cc.callFunc(function(){\r\n                   \r\n                }));\r\n                this.nodeButton.runAction(seqAction);\r\n                if(self._callBack)\r\n                {\r\n                    self._callBack(self);\r\n                }\r\n            }\r\n            \r\n        }, this);\r\n        \r\n        this.nodeButton.on(cc.Node.EventType.TOUCH_CANCEL, function(touch,event) {\r\n           \r\n        }, this);\r\n    },\r\n\r\n    start:function(){\r\n    },\r\n\r\n    update:function(dt){\r\n    },\r\n\r\n    onDestroy:function()\r\n    {\r\n    },\r\n    setBtnCallBack:function(onBtnCallBack)\r\n    {\r\n        this._callBack = onBtnCallBack;\r\n    },\r\n\r\n    setPosition:function(x,y)\r\n    {\r\n       this.nodeButton.setPosition(cc.p(x,y));\r\n\r\n    },\r\n\r\n    //设置按钮上的文字\r\n    setBtnLabelStr:function(str)\r\n    {\r\n        this.buttonLabel.string = str;\r\n        this.buttonLabel.enabled = true;\r\n    },\r\n\r\n    setObjectData:function(objectData)\r\n    {\r\n        this.objectData = objectData;\r\n    },\r\n\r\n    getObjectData:function()\r\n    {\r\n        return this.objectData;\r\n    },\r\n\r\n\r\n    //normalUrl 正常显示图片url、 按下pressUrl 回调onClickCallBack\r\n    setCCButton:function(normalUrl,pressUrl,onClickCallBack)\r\n    {\r\n        this._normalUrl = normalUrl;\r\n        this._pressUrl = pressUrl;\r\n        this._callBack = onClickCallBack;\r\n        var self = this;\r\n        cc.loader.loadRes(normalUrl, cc.SpriteFrame,function (error, spriteframe)\r\n        {\r\n            if (!error) {\r\n                self.normalSprite.spriteFrame = spriteframe;\r\n            }\r\n        });\r\n    },\r\n\r\n});\r\ncc.CCButton = module.exports = CCButton;"]}