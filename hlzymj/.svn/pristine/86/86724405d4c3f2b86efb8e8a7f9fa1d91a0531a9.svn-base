{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\scripts\\hall\\gamelib\\room/assets\\scripts\\hall\\gamelib\\room\\UserManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\scripts\\hall\\gamelib\\room","sourcesContent":["ï»¿import { UserInfo } from \"../UserInfo\";\r\nimport { ByteArray } from \"../../common/ByteArray\";\r\nimport { TSCommon } from \"../../TSCommon\";\r\nexport class UserManager {\r\n    private m_dwMyUserID: number;\r\n    private m_dwMyDBID: number;\r\n    public m_userList: UserInfo[];\r\n\r\n    constructor() {\r\n        this.m_dwMyUserID = 0xFFFFFFFF;\r\n        this.m_dwMyDBID = 0xFFFFFFFF;\r\n        this.m_userList = new Array<UserInfo>();\r\n    }\r\n\r\n    public getUserCount() {\r\n        return this.m_userList.length;\r\n    }\r\n\r\n\r\n    public setMyUserID(myUserID: number) {\r\n        this.m_dwMyUserID = myUserID;\r\n    }\r\n\r\n\r\n    public getMyUserID() {\r\n        return this.m_dwMyUserID;\r\n    }\r\n\r\n\r\n    public setMyDBID(myDBID) {\r\n        this.m_dwMyDBID = myDBID;\r\n    }\r\n\r\n    public getMyDBID() {\r\n        return this.m_dwMyDBID;\r\n    }\r\n\r\n\r\n    public addUser(user: UserInfo) {        \r\n        this.m_userList.push(user);\r\n    }\r\n\r\n    public removeUser(dwUserID: number) {\r\n        dwUserID = dwUserID % 0x10000;\r\n        for (var i: number = 0; i < this.m_userList.length; i++) {\r\n            if (dwUserID == this.m_userList[i].getUserID()) {\r\n                this.m_userList.splice(i, 1);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n    public getUser(dwUserID: number) {\r\n        dwUserID = dwUserID % 0x10000;\r\n        for (var i: number = 0; i < this.m_userList.length; i++) {\r\n            if (dwUserID == this.m_userList[i].getUserID())\r\n                return this.m_userList[i];\r\n        }\r\n        return null;\r\n    }\r\n\r\n\r\n    public getMyInfo() {\r\n        return this.getUser(this.m_dwMyUserID);\r\n    }\r\n\r\n\r\n    public clearAllUser() {\r\n        this.m_userList.splice(0);\r\n    }\r\n\r\n    public getUserByDBID(dwDBID: number) {        \r\n        for (var i: number = 0; i < this.m_userList.length; i++) {            \r\n            if (dwDBID == this.m_userList[i].getUserDBID())\r\n                return this.m_userList[i];\r\n        }\r\n        return null;\r\n    }\r\n\r\n\r\n    public updateGameUser(user) {\r\n        for (var i: number = 0; i < this.m_userList.length; i++) {\r\n            if (user.getUserID() == this.m_userList[i].getUserID()) {\r\n                this.m_userList[i] = user;\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    public updateUserScore(wUserID: number, bufScore: ByteArray) {\r\n        wUserID = wUserID % 0x10000;\r\n        for (var i: number = 0; i < this.m_userList.length; i++) {\r\n            if (wUserID == this.m_userList[i].getUserID()) {\r\n                this.m_userList[i]._scoreBuf = bufScore;\r\n                this.m_userList[i]._scoreBufLen = bufScore.length;\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n\r\n    public updateUserFame(wUserID: number, nFameLevel: number, nFameScore: number, cbVIPLevel: number) {\r\n        wUserID = wUserID % 0x10000;\r\n        for (var i: number = 0; i < this.m_userList.length; i++) {\r\n            if (wUserID == this.m_userList[i].getUserID()) {\r\n                this.m_userList[i]._fame = nFameScore;\r\n                this.m_userList[i]._fameLevel = nFameLevel;\r\n                this.m_userList[i].m_cbVipLevel = cbVIPLevel;\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n\r\n    public getUserByTableChair(wTableID: number, cbChair: number) {\r\n        for (var i: number = 0; i < this.m_userList.length; i++) {\r\n            if (this.m_userList[i]._tableID == wTableID\r\n                && this.m_userList[i]._chairID == cbChair\r\n                && this.m_userList[i].isPlayer())\r\n                return this.m_userList[i];\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public findUserByTableIndex(wTableID: number) {\r\n        var list: UserInfo[] = new Array<UserInfo>();\r\n        for (var i: number = 0; i < this.m_userList.length; i++) {\r\n            if (this.m_userList[i]._tableID == wTableID)\r\n                list.push(this.m_userList[i]);\r\n        }\r\n        return list;\r\n    }\r\n}"]}