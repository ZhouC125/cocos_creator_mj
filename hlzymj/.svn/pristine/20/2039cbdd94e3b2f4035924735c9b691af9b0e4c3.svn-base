{"version":3,"sources":["Player.js"],"names":["Resources","require","cc","Class","extends","Component","properties","playerName","default","type","Node","playerFace","playerScore","offLine","ready","robot","playerInfoLayer","winResultFont","Font","loseResultFont","selectCardSp","Sprite","dingqueSp","queWanHeadIconSp","queWanSp","chaDaJiaoSp","WAN","TIAO","TONG","INVA","DINGQUEZHONG","YIDINGQUE","XUANPAIZHONG","YIXUANPAI","CHADAJIAO","CHAHUAZHU","onLoad","self","loader","loadResDir","err","assets","biaoqinAssets","node","parent","on","EventType","TOUCH_START","onTouch","m_leaveTimerStop","initUI","onDestroy","stopLeaveTimer","unscheduleAllCallbacks","nDingqueType","setIsReady","setIsoffLine","setIsRobot","turnToOutPlayCardIsVis","playerNode","getChildByName","chat","active","name","prePos","p","log","x","y","hideLeaveTimer","event","pos","touch","getLocation","convertPos","convertToNodeSpace","size","getContentSize","rect","width","height","rectContainsPoint","PersonalInfoFrame","getComponent","init","userInfo","Come","nPos","m_nPos","setPlayerPos","Enter","Leave","cleanPlayers","Exit","refreshGold","nGold","isPrivateRoom","getIsPrivateRoom","m_lGold","getScore","result","getInstance","getRankAndStarByScore","Label","string","rankName","szGold","formatGold","getAvatarUrl","userID","onEnd","httpCallback","success","data","removeLoading","jsonObject","JSON","parse","table","FaceUrl","NickName","getWxUserInfoByUserID","setSelectCardSpIsVis","bIsVis","nType","strImg","loadRes","SpriteFrame","spriteFrame","setChaDaJiaoSpIsVis","setDingqueSpIsVis","setQueWanHeadIconSpIsVis","setQueWanSpIsVis","bolRun","pPos","getPosition","action","delayTime","TempPoint","action1","scaleTo","action2","action3","moveTo","action4","spawn","callBcak","callFunc","setScale","setPosition","dingQueFlyFinishIsVis","sequence","runAction","getNumberOfRunningActions","stopAllActions","winSize","director","getWinSize","Tools","cutString","getUserName","getGold","posX","posY","moveEnd","getUserStatus","gamelibcommon","USER_READY_STATUS","sendCMD","sendCMD_PO_RESTART","wxUserInfo","WeixinManager","avatarUrl","imgurl","load","url","texture","faceUrl","nickName","getUserDBID","callback","act","getPlayerName","getSex","SX_BOY","bIsReady","bIsOffline","bIsRobot","setIsWinner","bIsWinner","m_isWinner","getIsValidPlayer","getIsWinner","getFaceUrl","setLastGoldOnGameOver","m_nLastGold","bIsPlaying","whosTurnNode","dragonDisplay","addComponent","dragonBones","ArmatureDisplay","playAnimation","removeEventListener","EventObject","COMPLETE","addEventListener","stopWinAction","winNode","playWinAction","setTempChangeGold","bolChaDaJiao","resultScoreNode","isSystemFontUsed","font","playGuaFengEffects","playOperateEffects","effect","texiaoNode","addChild","sprite","spriteFrameName","GameCfg","EffectList","No_1pen","No_2chi","No_2gang","No_2hu","No_2ZiMo","No_2FanPao","No_2LiuJu","No_1lai","No_2caotian","buttonAtlas","getSpriteFrame","fadeOut","removeFromParent","showChatTextInfo","chatStr","wordIndex","i","QUICK_SEND_CHATS","playQWSoundEffect","parseInt","setOpacity","chattingNode","animation","Animation","animState","play","speed","wrapMode","WrapMode","Loop","repeatCount","Infinity","scale1","scale2","scale3","showChatFaceInfo","faceId","DragonBonesAsset","dragonAsset","DragonBonesAtlasAsset","dragonAtlasAsset","playFaceEffect","FACE_EFFECT","armatureName","onArmatureFinish","destroy","faceDragonDisplay","startLeaveTimerOnGameOver","totalTime","ready_timer","TSCommon","performWithDelay","getGameLib","leaveGameRoom","showLeaveTimer","gameOver","cleanAllMjs"],"mappings":"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","file":"Player.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\scripts\\hall\\game\\desk","sourcesContent":["import { gamelibcommon } from \"../../gamelib/gamelibcommon\";\r\nimport { TSCommon } from \"../../TSCommon\";\r\nimport { WeixinManager } from \"../../weixin/WeixinManager\";\r\nvar Resources = require(\"Resources\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        playerName: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n\r\n        playerFace: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n\r\n        playerScore: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n\r\n        offLine: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n\r\n        ready: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n\r\n        robot: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n\r\n        playerInfoLayer: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n\r\n        winResultFont: {\r\n            default: null,\r\n            type: cc.Font,\r\n        },\r\n\r\n        loseResultFont: {\r\n            default: null,\r\n            type: cc.Font,\r\n        },\r\n\r\n        selectCardSp:{\r\n            default: null,\r\n            type: cc.Sprite,\r\n        },\r\n\r\n        dingqueSp:{\r\n            default: null,\r\n            type: cc.Sprite,\r\n        },\r\n\r\n        queWanHeadIconSp:{\r\n            default: null,\r\n            type: cc.Sprite,\r\n        },\r\n\r\n        queWanSp:{\r\n            default: null,\r\n            type: cc.Sprite,\r\n        },\r\n        chaDaJiaoSp:{\r\n            default: null,\r\n            type: cc.Sprite,\r\n        },\r\n\r\n        WAN:    0,\r\n        TIAO :  1,\r\n        TONG :  2,\r\n        INVA :  3,\r\n        DINGQUEZHONG : 4, //定缺中\r\n        YIDINGQUE : 5, //已定缺\r\n        XUANPAIZHONG : 6, //选牌中\r\n        YIXUANPAI : 7, //已选牌\r\n        CHADAJIAO : 8, //查大叫\r\n        CHAHUAZHU : 9, //查花猪\r\n    },\r\n\r\n    onLoad: function () {\r\n\r\n        var self = this;\r\n        cc.loader.loadResDir(\"animation/dragonBones/biaoqin\", function (err, assets) {\r\n            self.biaoqinAssets = assets;\r\n        })\r\n\r\n        this.node.parent.on(cc.Node.EventType.TOUCH_START, this.onTouch, this);\r\n\r\n        this.m_leaveTimerStop = false;\r\n\r\n        this.initUI();\r\n    },\r\n\r\n    onDestroy: function () {\r\n        this.stopLeaveTimer();\r\n        this.unscheduleAllCallbacks();\r\n    },\r\n\r\n    initUI: function () {\r\n\r\n        this.nDingqueType = -1\r\n        this.setIsReady(false);\r\n\r\n        this.setIsoffLine(false);\r\n\r\n        this.setIsRobot(false);\r\n\r\n        this.turnToOutPlayCardIsVis(false);\r\n\r\n\r\n        var playerNode = this.node.getChildByName(\"playerNode\");\r\n\r\n        var chat = playerNode.getChildByName(\"chat_bg\");\r\n\r\n        chat.active = false;\r\n\r\n        if (this.node.name == \"myself\")\r\n            this.prePos = cc.p(-300, 0);\r\n\r\n        else if (this.node.name == \"right\")\r\n            this.prePos = cc.p(300, 0);\r\n\r\n\r\n        else if (this.node.name == \"top\")\r\n            this.prePos = cc.p(0, 300);\r\n\r\n        else if (this.node.name == \"left\")\r\n            this.prePos = cc.p(-300, 0);\r\n\r\n        else\r\n            cc.log(\"no other player\");\r\n\r\n        if (this.prePos) {\r\n            this.node.getChildByName(\"playerNode\").x = this.prePos.x;\r\n            this.node.getChildByName(\"playerNode\").y = this.prePos.y;\r\n        }\r\n\r\n        playerNode.getChildByName(\"result_score\").active = false;\r\n        this.playerInfoLayer.active = false;\r\n\r\n        this.hideLeaveTimer();\r\n    },\r\n\r\n    onTouch: function (event) {\r\n        var pos = event.touch.getLocation();\r\n        var convertPos = this.node.getChildByName(\"playerNode\").getChildByName(\"player_bg\").convertToNodeSpace(pos);\r\n        var size = this.node.getChildByName(\"playerNode\").getChildByName(\"player_bg\").getContentSize();\r\n        var rect = cc.rect(0, 0, size.width, size.height);\r\n\r\n        if (cc.rectContainsPoint(rect, convertPos)) {\r\n            // cc.log(\" --------player ----------nPos -----\");\r\n            var PersonalInfoFrame = this.playerInfoLayer.getComponent(\"PersonalInfoFrame\")\r\n            PersonalInfoFrame.init(this.userInfo);\r\n            this.playerInfoLayer.active = true;\r\n        }\r\n    },\r\n\r\n    Come: function (nPos, userInfo) {\r\n        cc.log(\"call user come  function  nPos = \", nPos);\r\n\r\n        this.userInfo = userInfo;\r\n\r\n        this.m_nPos = nPos;\r\n\r\n        this.node.getComponent(\"PlayerCardLayer\").setPlayerPos(nPos);\r\n        this.node.getComponent(\"OutCardLayer\").setPlayerPos(nPos);\r\n        this.Enter(nPos);\r\n    },\r\n\r\n    Leave: function (nPos) {\r\n\r\n        //关掉跟player有关联的界面\r\n        this.playerInfoLayer.active = false;\r\n\r\n        //准备隐藏\r\n        this.setIsReady(false);\r\n\r\n        //定时器设置为隐藏\r\n        this.hideLeaveTimer();\r\n\r\n        //清除掉玩家相关显示\r\n        this.cleanPlayers();\r\n\r\n        //让玩家退出\r\n        this.Exit(nPos);\r\n\r\n    },\r\n\r\n    refreshGold: function (nGold) {\r\n        var isPrivateRoom = this.node.parent.getComponent(\"DeskScene\").getIsPrivateRoom();\r\n        if (isPrivateRoom) {\r\n            if(this.userInfo){\r\n                this.m_lGold = this.userInfo.getScore();\r\n                cc.log(\"private this.m_lGold=\" + this.m_lGold)\r\n\r\n                //获取段位  然后显示段位\r\n                var result = require(\"HallResources\").getInstance().getRankAndStarByScore(this.m_lGold)\r\n                this.playerScore.getComponent(cc.Label).string = result.rankName;\r\n            }\r\n            \r\n        }\r\n        else {\r\n            this.m_lGold = nGold;\r\n\r\n            var szGold = Resources.formatGold(this.m_lGold, true);\r\n            this.playerScore.getComponent(cc.Label).string = szGold;\r\n        }\r\n    },\r\n\r\n\r\n    getAvatarUrl: function (userID, onEnd) {\r\n        var httpCallback = function (success, data) {\r\n            require('HallResources').getInstance().removeLoading();\r\n            if (success) {\r\n                var jsonObject = JSON.parse(data).table[0];\r\n                if (onEnd && jsonObject.FaceUrl != \"\") {\r\n                    onEnd(jsonObject.FaceUrl, jsonObject.NickName);\r\n                }\r\n            }\r\n        }\r\n        require(\"HallWebRequest\").getInstance().getWxUserInfoByUserID(userID, httpCallback);\r\n    },\r\n\r\n    setSelectCardSpIsVis:function(bIsVis,nType){\r\n        var self = this;\r\n        self.selectCardSp.node.active = bIsVis;\r\n\r\n        if (bIsVis){\r\n            var strImg = \"texture/game/xuanpai\"\r\n            if (nType == this.XUANPAIZHONG)\r\n                strImg = \"texture/game/xuanpai\"\r\n            else if (nType == this.YIXUANPAI)\r\n                strImg = \"texture/game/yixuanpai\"\r\n            \r\n            cc.loader.loadRes(strImg, cc.SpriteFrame, function (err, spriteFrame) {\r\n                if (!err) {\r\n                    self.selectCardSp.spriteFrame = spriteFrame;\r\n                }\r\n            })\r\n        }\r\n    },\r\n\r\n    setChaDaJiaoSpIsVis:function(bIsVis,nType){\r\n        var self = this;\r\n        self.chaDaJiaoSp.node.active = bIsVis;\r\n\r\n        if (bIsVis){\r\n            var strImg = \"texture/game/chaDaJiao\"\r\n            if (nType == this.CHADAJIAO)\r\n                strImg = \"texture/game/chaDaJiao\"\r\n            else if (nType == this.CHAHUAZHU)\r\n                strImg = \"texture/game/chaHuaZhu\"\r\n            \r\n            cc.loader.loadRes(strImg, cc.SpriteFrame, function (err, spriteFrame) {\r\n                if (!err) {\r\n                    self.chaDaJiaoSp.spriteFrame = spriteFrame;\r\n                }\r\n            })\r\n        }\r\n    },\r\n\r\n    setDingqueSpIsVis:function(bIsVis,nType){\r\n        var self = this;\r\n        self.dingqueSp.node.active = bIsVis;\r\n\r\n        if (bIsVis){\r\n            var strImg = \"texture/game/dingque\"\r\n            if (nType == this.DINGQUEZHONG)\r\n                strImg = \"texture/game/dingque\"\r\n            else if (nType == this.YIDINGQUE)\r\n                strImg = \"texture/game/yidingque\"\r\n            \r\n            cc.loader.loadRes(strImg, cc.SpriteFrame, function (err, spriteFrame) {\r\n                if (!err) {\r\n                    self.dingqueSp.spriteFrame = spriteFrame;\r\n                }\r\n            })\r\n        }\r\n    },\r\n    setQueWanHeadIconSpIsVis:function(bIsVis,nType){\r\n        var self = this;\r\n        self.nDingqueType = nType;\r\n        self.queWanHeadIconSp.node.active = bIsVis;\r\n        \r\n        if (bIsVis) {\r\n            var strImg = \"texture/game/swap/wan2\"\r\n            if (nType == this.WAN)\r\n                strImg = \"texture/game/swap/wan2\"\r\n            else if (nType == this.TIAO)\r\n                strImg = \"texture/game/swap/tiao2\"\r\n            else if (nType == this.TONG)\r\n                strImg = \"texture/game/swap/tong2\"\r\n\r\n            cc.loader.loadRes(strImg, cc.SpriteFrame, function (err, spriteFrame) {\r\n                if (!err) {\r\n                    self.queWanHeadIconSp.spriteFrame = spriteFrame;\r\n                }\r\n            })\r\n        }\r\n    },\r\n\r\n\r\n    setQueWanSpIsVis:function(bIsVis,nType,bolRun){\r\n        var self = this;\r\n        self.nDingqueType = nType;\r\n        var pPos = self.queWanSp.node.getPosition();\r\n        self.queWanSp.node.active = bIsVis;\r\n\r\n        if (bIsVis){ \r\n            var strImg = \"texture/game/swap/wan1\"\r\n            if (nType == this.WAN)\r\n                strImg = \"texture/game/swap/wan1\"\r\n            else if (nType == this.TIAO)\r\n                strImg = \"texture/game/swap/tiao1\"\r\n            else if (nType == this.TONG)\r\n                strImg = \"texture/game/swap/tong1\"\r\n\r\n            cc.loader.loadRes(strImg, cc.SpriteFrame, function (err, spriteFrame) {\r\n                if (!err) {\r\n                    self.queWanSp.spriteFrame = spriteFrame;\r\n                }\r\n            })\r\n            \r\n            var action =  cc.delayTime(0.5);\r\n            var TempPoint = self.queWanHeadIconSp.node.getPosition();\r\n            var action1 = cc.scaleTo(0.2, 1.5, 1.5);\r\n            var action2 = cc.scaleTo(0.2, 1, 1);\r\n            var action3 = cc.moveTo(0.1, TempPoint.x, TempPoint.y + 30);\r\n            var action4 = cc.scaleTo(0.5, 0.3, 0.3);\r\n            var spawn = cc.spawn(action1, action2, action3, action4);\r\n            var callBcak = cc.callFunc(function(){\r\n                self.queWanSp.node.active = false;\r\n                self.queWanSp.node.setScale(1);\r\n                self.queWanSp.node.setPosition(pPos);\r\n                self.setQueWanHeadIconSpIsVis(bIsVis,nType)\r\n                self.dingQueFlyFinishIsVis(true);\r\n                // Resources.playMjSoundEffect(SoundRes.SOUND_XUANQUE)\r\n            });\r\n\r\n            var sequence = cc.sequence(action, spawn,callBcak);\r\n            if (bolRun)\r\n                this.queWanSp.node.runAction(sequence);\r\n        }       \r\n    },\r\n\r\n    //进入函数\r\n    Enter: function (nPos) {\r\n        cc.log(\"nPos ==========\" + nPos);\r\n        if (this.node.getChildByName(\"playerNode\").getNumberOfRunningActions() > 0) {\r\n            this.node.getChildByName(\"playerNode\").stopAllActions();\r\n        }\r\n\r\n        var winSize = cc.director.getWinSize();\r\n\r\n        this.node.getChildByName(\"playerNode\").nPos = nPos;\r\n\r\n        var Tools = require(\"Tools\");\r\n\r\n        //获取机器人信息\r\n        var result = Tools.cutString(this.userInfo.getUserName(), 80, 17, this.node.getChildByName(\"playerNode\"));\r\n        this.playerName.getComponent(cc.Label).string = result;\r\n\r\n\r\n\r\n        this.refreshGold(this.userInfo.getGold());\r\n        if (nPos == 1) {\r\n            this.node.getChildByName(\"playerNode\").x = this.prePos.x;\r\n            this.node.getChildByName(\"playerNode\").y = this.prePos.y;\r\n            var posX = 0;\r\n            var posY = this.node.getChildByName(\"playerNode\").y;\r\n            var isPrivateRoom = this.node.parent.getComponent(\"DeskScene\").getIsPrivateRoom();\r\n\r\n            var self = this;\r\n            var moveEnd = function () {\r\n                if (self.userInfo.getUserStatus() == gamelibcommon.USER_READY_STATUS)\r\n                    self.setIsReady(true);\r\n                else {\r\n                    if(isPrivateRoom){\r\n                        var sendCMD = require(\"sendCMD\");\r\n                        sendCMD.sendCMD_PO_RESTART();\r\n                    }\r\n                }\r\n            }\r\n\r\n            var wxUserInfo = WeixinManager.getInstance().userInfo;\r\n            if (wxUserInfo && wxUserInfo.avatarUrl) {\r\n                var imgurl = wxUserInfo.avatarUrl //+ \"?aaa=aa.jpg\";\r\n                this.userInfo.imgurl = imgurl;\r\n                cc.loader.load({ url: imgurl, type: \"jpg\" }, function (err, texture) {\r\n                    self.playerFace.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\r\n                });\r\n            }\r\n            else {\r\n                var onEnd = function (faceUrl, nickName) {\r\n                    var imgurl = faceUrl // + \"?aaa=aa.jpg\";\r\n                    self.userInfo.imgurl = imgurl;\r\n                    cc.loader.load({ url: imgurl, type: \"jpg\" }, function (err, texture) {\r\n                        self.playerFace.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\r\n                    });\r\n                };\r\n                this.getAvatarUrl(this.userInfo.getUserDBID(), onEnd);\r\n            }\r\n\r\n            var moveTo = cc.moveTo(0.4, posX, posY);\r\n            var callback = cc.callFunc(moveEnd)\r\n            var sequence = cc.sequence(moveTo, callback);\r\n            this.node.getChildByName(\"playerNode\").runAction(sequence);\r\n        }\r\n        else if (nPos == 4) {\r\n            this.node.getChildByName(\"playerNode\").x = this.prePos.x;\r\n            this.node.getChildByName(\"playerNode\").y = this.prePos.y;\r\n            var posX = 0;\r\n            var posY = this.node.getChildByName(\"playerNode\").y;\r\n\r\n            var self = this;\r\n            var moveEnd = function () {\r\n                if (self.userInfo.getUserStatus() == gamelibcommon.USER_READY_STATUS)\r\n                    self.setIsReady(true);\r\n            };\r\n\r\n            var onEnd = function (faceUrl, nickName) {\r\n                var imgurl = faceUrl // + \"?aaa=aa.jpg\";\r\n                self.userInfo.imgurl = imgurl;\r\n                cc.loader.load({ url: imgurl, type: \"jpg\" }, function (err, texture) {\r\n                    self.playerFace.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\r\n                });\r\n            };\r\n            this.getAvatarUrl(this.userInfo.getUserDBID(), onEnd);\r\n\r\n            var moveTo = cc.moveTo(0.4, posX, posY);\r\n            var callback = cc.callFunc(moveEnd)\r\n            var sequence = cc.sequence(moveTo, callback);\r\n            this.node.getChildByName(\"playerNode\").runAction(sequence);\r\n        }\r\n        else if (nPos == 3) {\r\n            this.node.getChildByName(\"playerNode\").x = this.prePos.x;\r\n            this.node.getChildByName(\"playerNode\").y = this.prePos.y;\r\n            var posX = this.node.getChildByName(\"playerNode\").x;\r\n            var posY = 0;\r\n\r\n            var self = this;\r\n            var moveEnd = function () {\r\n                if (self.userInfo.getUserStatus() == gamelibcommon.USER_READY_STATUS)\r\n                    self.setIsReady(true);\r\n            };\r\n\r\n            var onEnd = function (faceUrl, nickName) {\r\n                var imgurl = faceUrl// + \"?aaa=aa.jpg\";\r\n                self.userInfo.imgurl = imgurl;\r\n                cc.loader.load({ url: imgurl, type: \"jpg\" }, function (err, texture) {\r\n                    self.playerFace.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\r\n                });\r\n            };\r\n            this.getAvatarUrl(this.userInfo.getUserDBID(), onEnd);\r\n\r\n            var moveTo = cc.moveTo(0.4, posX, posY);\r\n            var callback = cc.callFunc(moveEnd)\r\n            var sequence = cc.sequence(moveTo, callback);\r\n            this.node.getChildByName(\"playerNode\").runAction(sequence);\r\n        }\r\n        else if (nPos == 2) {\r\n            this.node.getChildByName(\"playerNode\").x = this.prePos.x;\r\n            this.node.getChildByName(\"playerNode\").y = this.prePos.y;\r\n            var posX = 0;\r\n            var posY = this.node.getChildByName(\"playerNode\").y;\r\n\r\n            var self = this;\r\n            var moveEnd = function () {\r\n                if (self.userInfo.getUserStatus() == gamelibcommon.USER_READY_STATUS)\r\n                    self.setIsReady(true);\r\n            };\r\n\r\n            var onEnd = function (faceUrl, nickName) {\r\n                var imgurl = faceUrl// + \"?aaa=aa.jpeg\";\r\n                self.userInfo.imgurl = imgurl;\r\n                cc.loader.load({ url: imgurl, type: \"jpg\" }, function (err, texture) {\r\n                    self.playerFace.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\r\n                });\r\n            };\r\n            this.getAvatarUrl(this.userInfo.getUserDBID(), onEnd);\r\n\r\n            var moveTo = cc.moveTo(0.4, posX, posY);\r\n            var callback = cc.callFunc(moveEnd)\r\n            var sequence = cc.sequence(moveTo, callback);\r\n            this.node.getChildByName(\"playerNode\").runAction(sequence);\r\n        }\r\n    },\r\n\r\n    //退出\r\n    Exit: function (nPos) {\r\n        // var winSize = cc.director.getWinSize();\r\n        if (nPos == 1) {\r\n            var act = cc.moveTo(0.4, this.prePos.x, this.prePos.y);\r\n            this.node.getChildByName(\"playerNode\").runAction(act);\r\n        }\r\n        else if (nPos == 2) {\r\n            var act = cc.moveTo(0.4, this.prePos.x, this.prePos.y);\r\n            this.node.getChildByName(\"playerNode\").runAction(act);\r\n        }\r\n        else if (nPos == 3) {\r\n            var act = cc.moveTo(0.4, this.prePos.x, this.prePos.y);\r\n            this.node.getChildByName(\"playerNode\").runAction(act);\r\n        }\r\n        else if (nPos == 4) {\r\n            var act = cc.moveTo(0.4, this.prePos.x, this.prePos.y);\r\n            this.node.getChildByName(\"playerNode\").runAction(act);\r\n        }\r\n    },\r\n\r\n    getPlayerName: function () {\r\n        return this.playerName.getComponent(cc.Label).string;\r\n    },\r\n\r\n    getSex: function () {\r\n        if(this.userInfo){\r\n            return this.userInfo.getSex();\r\n        }\r\n        else{\r\n            return gamelibcommon.SX_BOY;\r\n        }\r\n        \r\n    },\r\n\r\n    getGold: function () {\r\n        return this.m_lGold;\r\n    },\r\n\r\n    setIsReady: function (bIsReady) {\r\n        this.ready.active = bIsReady;\r\n    },\r\n\r\n    setIsoffLine: function (bIsOffline) {\r\n        this.offLine.active = bIsOffline;\r\n    },\r\n\r\n    //设定是否托管了\r\n    setIsRobot: function (bIsRobot) {\r\n        this.robot.active = bIsRobot;\r\n    },\r\n\r\n    setIsWinner: function (bIsWinner) {\r\n        this.m_isWinner = bIsWinner;\r\n    },\r\n\r\n    getIsValidPlayer: function () {\r\n        if (this.userInfo) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    getIsWinner: function () {\r\n        return this.m_isWinner;\r\n    },\r\n\r\n    //获取头像地址\r\n    getFaceUrl: function () {\r\n        if(this.userInfo){\r\n            return this.userInfo.imgurl;\r\n        }\r\n        return \"\";\r\n    },\r\n\r\n    //游戏结束时候设定最后的分数\r\n    setLastGoldOnGameOver: function (nGold) {\r\n        this.m_nLastGold = nGold;\r\n    },\r\n\r\n    turnToOutPlayCardIsVis: function (bIsPlaying) {\r\n        var playerNode = this.node.getChildByName(\"playerNode\");\r\n        var whosTurnNode = playerNode.getChildByName(\"whosturn_act\");\r\n\r\n\r\n        if (bIsPlaying) {\r\n            whosTurnNode.active = true;\r\n            var dragonDisplay = whosTurnNode.addComponent(dragonBones.ArmatureDisplay);\r\n            dragonDisplay.playAnimation('Animation2');\r\n        }\r\n        else {\r\n            whosTurnNode.active = false;\r\n        }\r\n    },\r\n\r\n    dingQueFlyFinishIsVis: function (bIsPlaying) {\r\n        var playerNode = this.node.getChildByName(\"playerNode\");\r\n        var whosTurnNode = playerNode.getChildByName(\"queyimen_act\");\r\n\r\n\r\n        if (bIsPlaying) {\r\n            whosTurnNode.active = true;\r\n            var dragonDisplay = whosTurnNode.addComponent(dragonBones.ArmatureDisplay);\r\n            dragonDisplay.playAnimation('Animation1');\r\n\r\n            var self = this;\r\n            var callback = function () {\r\n                self.dingQueFlyFinishIsVis(false);\r\n                dragonDisplay.removeEventListener(dragonBones.EventObject.COMPLETE, callback, self);\r\n            }\r\n    \r\n            dragonDisplay.addEventListener(dragonBones.EventObject.COMPLETE, callback, this)\r\n        }\r\n        else {\r\n            whosTurnNode.active = false;\r\n        }\r\n    },\r\n\r\n    stopWinAction: function () {\r\n        var playerNode = this.node.getChildByName(\"playerNode\");\r\n        var winNode = playerNode.getChildByName(\"win_act\");\r\n        winNode.active = false;\r\n    },\r\n\r\n    //播放玩家赢牌特效\r\n    playWinAction: function () {\r\n        var playerNode = this.node.getChildByName(\"playerNode\");\r\n        var winNode = playerNode.getChildByName(\"win_act\");\r\n        winNode.active = true;\r\n        var dragonDisplay = winNode.getComponent(dragonBones.ArmatureDisplay);\r\n        dragonDisplay.playAnimation('Animation2');\r\n\r\n        var self = this;\r\n        var callback = function () {\r\n            self.stopWinAction();\r\n            dragonDisplay.removeEventListener(dragonBones.EventObject.COMPLETE, callback, self);\r\n        }\r\n\r\n        dragonDisplay.addEventListener(dragonBones.EventObject.COMPLETE, callback, this)\r\n    },\r\n\r\n\r\n    //设置临时改变金币\r\n    setTempChangeGold: function (nGold, callback,bolChaDaJiao) {\r\n        this.m_lGold += nGold;\r\n        if (this.m_lGold < 0) {\r\n            this.m_lGold = 0;\r\n        }\r\n        \r\n        this.refreshGold(this.m_lGold);\r\n\r\n        var playerNode = this.node.getChildByName(\"playerNode\");\r\n        var resultScoreNode = playerNode.getChildByName(\"result_score\");\r\n        if (!bolChaDaJiao){\r\n            resultScoreNode.active = true;\r\n        }\r\n        resultScoreNode.getComponent(cc.Label).isSystemFontUsed = false;\r\n        if (nGold > 0) {\r\n            resultScoreNode.getComponent(cc.Label).font = this.winResultFont;\r\n            resultScoreNode.getComponent(cc.Label).string = \"+\" + nGold;\r\n        }\r\n        else {\r\n            resultScoreNode.getComponent(cc.Label).font = this.loseResultFont;\r\n            resultScoreNode.getComponent(cc.Label).string = nGold;\r\n        }\r\n\r\n        var prePos = cc.p(resultScoreNode.getPosition());\r\n\r\n        var moveTo = cc.moveTo(1, cc.p(resultScoreNode.x, resultScoreNode.y + 30));\r\n        var delayTime = cc.delayTime(1);\r\n\r\n        var onEnd = cc.callFunc(() => {\r\n            resultScoreNode.getComponent(cc.Label).string = \"\";\r\n            resultScoreNode.setPosition(prePos);\r\n            resultScoreNode.active = false;\r\n            if (callback) {\r\n                callback();\r\n            }\r\n        })\r\n\r\n        var sequence = cc.sequence(moveTo, delayTime, onEnd);\r\n        resultScoreNode.runAction(sequence);\r\n    },\r\n\r\n    playGuaFengEffects: function (bIsPlaying,nPos) {\r\n        var playerNode = this.node.getChildByName(\"playerNode\");\r\n        var whosTurnNode = playerNode.getChildByName(\"guafeng_act\");\r\n        if (nPos == 1) {\r\n            whosTurnNode.x = 0;\r\n            whosTurnNode.y = -170;\r\n        }\r\n        else if (nPos == 2) {\r\n            whosTurnNode.x = 345;\r\n            whosTurnNode.y = 30;\r\n        }\r\n        else if (nPos == 3) {\r\n            whosTurnNode.x = 0;\r\n            whosTurnNode.y = 205;\r\n        }\r\n        else if (nPos == 4) {\r\n            whosTurnNode.x = -365;\r\n            whosTurnNode.y = 30;\r\n        }\r\n\r\n        if (bIsPlaying) {\r\n            whosTurnNode.active = true;\r\n            var dragonDisplay = whosTurnNode.addComponent(dragonBones.ArmatureDisplay);\r\n            dragonDisplay.playAnimation('Animation2');\r\n\r\n            var self = this;\r\n            var callback = function () {\r\n                // self.dingQueFlyFinishIsVis(false);\r\n                dragonDisplay.removeEventListener(dragonBones.EventObject.COMPLETE, callback, self);\r\n            }\r\n    \r\n            dragonDisplay.addEventListener(dragonBones.EventObject.COMPLETE, callback, this)\r\n        }\r\n        else {\r\n            whosTurnNode.active = false;\r\n        }\r\n\r\n    },\r\n\r\n    playOperateEffects: function (effect, nPos) {\r\n        var texiaoNode = new cc.Node();\r\n        this.node.parent.addChild(texiaoNode, 100);\r\n\r\n\r\n        var sprite = texiaoNode.addComponent(cc.Sprite);\r\n\r\n        var spriteFrameName;\r\n\r\n        var GameCfg = require(\"GameCfg\");\r\n\r\n        //碰\r\n        if (effect == GameCfg.EffectList.No_1pen) {\r\n            spriteFrameName = \"No_1pen\";\r\n        }\r\n        //吃\r\n        else if (effect == GameCfg.EffectList.No_2chi) {\r\n            spriteFrameName = \"No_2chi\";\r\n        }\r\n        //杠\r\n        else if (effect == GameCfg.EffectList.No_2gang) {\r\n            spriteFrameName = \"No_2gang\";\r\n        }\r\n        //胡\r\n        else if (effect == GameCfg.EffectList.No_2hu) {\r\n            spriteFrameName = \"No_2hu\";\r\n        }\r\n        else if (effect == GameCfg.EffectList.No_2ZiMo) {\r\n            spriteFrameName = \"No_2ZiMo\";\r\n        }\r\n        //放炮\r\n        else if (effect == GameCfg.EffectList.No_2FanPao) {\r\n            spriteFrameName = \"No_2FanPao\";\r\n        }\r\n        //流局\r\n        else if (effect == GameCfg.EffectList.No_2LiuJu) {\r\n            spriteFrameName = \"No_2LiuJu\";\r\n        }\r\n        //癞\r\n        else if (effect == GameCfg.EffectList.No_1lai) {\r\n            spriteFrameName = \"No_1lai\";\r\n        }\r\n        else if (effect == GameCfg.EffectList.No_2caotian) {\r\n            spriteFrameName = \"No_2caotian\";\r\n        }\r\n\r\n        var winSize = cc.director.getWinSize();\r\n        if (nPos == 1) {\r\n            texiaoNode.x = 0;\r\n            texiaoNode.y = -170;\r\n        }\r\n        else if (nPos == 2) {\r\n            texiaoNode.x = 345;\r\n            texiaoNode.y = 30;\r\n        }\r\n        else if (nPos == 3) {\r\n            texiaoNode.x = 0;\r\n            texiaoNode.y = 205;\r\n        }\r\n        else if (nPos == 4) {\r\n            texiaoNode.x = -365;\r\n            texiaoNode.y = 30;\r\n        }\r\n        else {\r\n            cc.log(\"the nPos is error\");\r\n        }\r\n\r\n        if (spriteFrameName) {\r\n            sprite.spriteFrame = this.node.parent.getComponent(\"GameButtonLayer\").buttonAtlas.getSpriteFrame(spriteFrameName);\r\n        }\r\n\r\n        texiaoNode.setScale(1.5);\r\n        var delayTime = cc.delayTime(0.1);\r\n        var scaleTo = cc.scaleTo(0.2, 0.85)\r\n        var fadeOut = cc.fadeOut(0.5);\r\n        var onEnd = function () {\r\n            texiaoNode.removeFromParent();\r\n        };\r\n        var callback = cc.callFunc(onEnd)\r\n        var sequence = cc.sequence(delayTime, scaleTo, fadeOut, callback);\r\n        texiaoNode.runAction(sequence);\r\n    },\r\n\r\n    showChatTextInfo: function (chatStr) {\r\n        var wordIndex = -1;\r\n        for (var i in Resources.QUICK_SEND_CHATS) {\r\n            if (chatStr == Resources.QUICK_SEND_CHATS[i]) {\r\n                wordIndex = i;\r\n                break;\r\n            }\r\n        }\r\n\r\n        Resources.playQWSoundEffect(this.userInfo.getSex(), parseInt(wordIndex) + 1)\r\n\r\n        var playerNode = this.node.getChildByName(\"playerNode\");\r\n\r\n        var chat = playerNode.getChildByName(\"chat_bg\");\r\n\r\n        chat.stopAllActions();\r\n\r\n        chat.setScale(0.5);\r\n\r\n        chat.setOpacity(255)\r\n\r\n        chat.active = true;\r\n\r\n        var chattingNode = chat.getChildByName(\"chatting_status\");\r\n\r\n        var animation = chattingNode.getComponent(cc.Animation);\r\n\r\n        var animState = animation.play(\"spot_wait_action\");\r\n\r\n        animState.speed = 0.3;  //减慢动画播放速度\r\n\r\n        animState.wrapMode = cc.WrapMode.Loop;\r\n\r\n        animState.repeatCount = Infinity;\r\n\r\n        var scale1 = cc.scaleTo(0.2, 1.1);\r\n        var scale2 = cc.scaleTo(0.2, 1);\r\n        var delayTime = cc.delayTime(2);\r\n\r\n        var fadeOut = cc.fadeOut(0.2);\r\n        var scale3 = cc.scaleTo(0.2, 0.5);\r\n\r\n        var spawn = cc.spawn(fadeOut, scale3);\r\n\r\n        var onEnd = cc.callFunc(() => {\r\n\r\n            chat.active = false;\r\n        })\r\n\r\n        var sequence = cc.sequence(scale1, scale2, delayTime, spawn, onEnd);\r\n\r\n        chat.runAction(sequence);\r\n\r\n    },\r\n\r\n    showChatFaceInfo: function (faceId) {\r\n        var node = new cc.Node();\r\n        node.x = this.playerFace.x;\r\n        node.y = this.playerFace.y\r\n        node.active = true;\r\n        this.node.getChildByName(\"playerNode\").addChild(node, 100);\r\n        var dragonDisplay = node.addComponent(dragonBones.ArmatureDisplay);\r\n        for (var i in this.biaoqinAssets) {\r\n            if (this.biaoqinAssets[i] instanceof dragonBones.DragonBonesAsset) {\r\n                dragonDisplay.dragonAsset = this.biaoqinAssets[i];\r\n            }\r\n            if (this.biaoqinAssets[i] instanceof dragonBones.DragonBonesAtlasAsset) {\r\n                dragonDisplay.dragonAtlasAsset = this.biaoqinAssets[i];\r\n            }\r\n        }\r\n\r\n        Resources.playFaceEffect(Resources.FACE_EFFECT[faceId]);\r\n\r\n        dragonDisplay.armatureName = 'armatureName';\r\n        dragonDisplay.playAnimation(faceId + 1);\r\n        this.onArmatureFinish = function () {\r\n            node.destroy();\r\n        }\r\n        dragonDisplay.addEventListener(dragonBones.EventObject.COMPLETE, this.onArmatureFinish, this)\r\n        this.faceDragonDisplay = dragonDisplay;\r\n    },\r\n\r\n\r\n    startLeaveTimerOnGameOver: function () {\r\n        // if (this.m_nPos == 1 || this.node.name == \"myself\") {\r\n        //     return;\r\n        // }\r\n\r\n        var totalTime = 25;\r\n\r\n        var playerNode = this.node.getChildByName(\"playerNode\");\r\n        var ready_timer = playerNode.getChildByName(\"ready_timer\");\r\n        ready_timer.active = false;\r\n        ready_timer.getComponent(cc.Label).string = totalTime;\r\n\r\n        var self = this;\r\n        var callback = function () {\r\n            if (self.m_leaveTimerStop) {\r\n                return;\r\n            }\r\n            totalTime -= 1;\r\n            ready_timer.getComponent(cc.Label).string = totalTime;\r\n\r\n            if (totalTime >= 0) {\r\n                TSCommon.performWithDelay(self, callback, 1);\r\n            }\r\n            else {\r\n                ready_timer.active = false;\r\n\r\n                if (self.m_nPos == 1 || self.node.name == \"myself\") {\r\n                    require('GameLibSink').getInstance().getGameLib().leaveGameRoom();\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n\r\n        TSCommon.performWithDelay(this, callback, 1);\r\n    },\r\n\r\n\r\n    stopLeaveTimer: function () {\r\n        this.m_leaveTimerStop = true;\r\n    },\r\n\r\n    //展示玩家离开定时器\r\n    showLeaveTimer: function () {\r\n        // if (this.m_nPos == 1 || this.node.name == \"myself\") {\r\n        //     return;\r\n        // }\r\n        var playerNode = this.node.getChildByName(\"playerNode\");\r\n        var ready_timer = playerNode.getChildByName(\"ready_timer\");\r\n        ready_timer.active = true;\r\n    },\r\n\r\n    //隐藏玩家离开定时器\r\n    hideLeaveTimer: function () {\r\n        // if (this.m_nPos == 1 || this.node.name == \"myself\") {\r\n        //     return;\r\n        // }\r\n        var playerNode = this.node.getChildByName(\"playerNode\");\r\n        var ready_timer = playerNode.getChildByName(\"ready_timer\");\r\n        ready_timer.active = false;\r\n    },\r\n\r\n    //游戏结束\r\n    gameOver: function () {\r\n\r\n        this.turnToOutPlayCardIsVis(false);\r\n\r\n        this.startLeaveTimerOnGameOver();\r\n\r\n        var playerNode = this.node.getChildByName(\"playerNode\");\r\n        var resultScoreNode = playerNode.getChildByName(\"result_score\");\r\n        resultScoreNode.getComponent(cc.Label).isSystemFontUsed = false;\r\n        if (this.m_nLastGold >= 0) {\r\n            resultScoreNode.getComponent(cc.Label).font = this.winResultFont\r\n            resultScoreNode.getComponent(cc.Label).string = \"+\" + this.m_nLastGold;\r\n        }\r\n        else {\r\n            resultScoreNode.getComponent(cc.Label).font = this.loseResultFont\r\n            resultScoreNode.getComponent(cc.Label).string = this.m_nLastGold;\r\n        }\r\n\r\n        resultScoreNode.active = true;\r\n\r\n        if (this.getIsValidPlayer()) {\r\n\r\n            if (this.m_isWinner) {\r\n                this.playWinAction();\r\n            }\r\n\r\n            this.node.getComponent(\"PlayerCardLayer\").gameOver();\r\n\r\n            this.node.getComponent(\"OutCardLayer\").gameOver();\r\n\r\n            this.node.getComponent(\"HuCardLayer\").gameOver();\r\n        }\r\n    },\r\n\r\n    //游戏重新开始需要清理的东西\r\n    cleanPlayers: function () {\r\n\r\n        this.node.getComponent(\"PlayerCardLayer\").cleanAllMjs();\r\n\r\n        this.node.getComponent(\"OutCardLayer\").cleanAllMjs();\r\n\r\n        this.node.getComponent(\"HuCardLayer\").cleanAllMjs();\r\n\r\n        var playerNode = this.node.getChildByName(\"playerNode\");\r\n        var resultScoreNode = playerNode.getChildByName(\"result_score\");\r\n        resultScoreNode.active = false;\r\n    },\r\n\r\n});\r\n"]}