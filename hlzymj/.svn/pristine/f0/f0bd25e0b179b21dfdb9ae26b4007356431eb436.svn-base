{"version":3,"sources":["HallWebRequest.js"],"names":["HallWebRequest","cc","Class","extends","Component","statics","instance","ctor","m_checkStatusCount","ACTIVE_CHECK_STATUS_COUNT","getAddress","url","Domain","WebRoot","getGameAddress","GameWebRoot","isCheckStatus","refreshCheckStatus","httpRequest","file","data","onRetCallBack","post","require","getInstance","showLoading","undefined","address","TSCommon","log","WebRequest","webRequest","getData","gameHttpRequest","reportRecordLogToServer","traceID","publicUserInfo","getPublicUserInfo","szData","userDBID","httpCallback","success","jsonObject","JSON","parse","RetCode","parseInt","console","checkNewStatus","self","HallResources","checkNew","table","nNewMail","MailTip","nNewFriend","NewFriendTip","nRank","PayRandkTip","nNewPayment","PayTip","nGold","Amount","bankAmount","BankAmount","nDiamond","DiamondAmount","nFrag","FragNum","nServiceTip","ServiceMessageTip","nClubCard","ClubCard","nPlayerQualifyingScore","sc","dispatchEvent","onGoldOrDiamondChanged","onChangePlayerQualifyingScore","scheduler","director","getScheduler","unscheduleCallbackForTarget","scheduleCallbackForTarget","requestNotice","getProperty","getCollectInfo","getCollectReward","encryptPassword","getBankruptInfo","getBankruptReward","getDailyCheckInfo","sendDailyCheck","requestIsBeReport","requestCheatReport","nType","getWxInviteActivityInfo","getWxInviteAwardGetInfo","myOpenID","setWxUserInfo","WxFaceUrl","WxNickName","getWxUserInfo","playerOpenID","getWxUserInfoByUserID","userID","getWxInviteAwardGetAward","inviterOpenID","inviteeOpenID","getPlayerData","friendsOpenID","getPlayerWinState","getPlayerDiamondCount","exchangeMoneyByDiamond","needDiamond","getWxShareDiamondAwardGetInfo","getWxShareDiamondAwardGetAward","encryptedData","iv","encodeURIComponent","getWxAESDecript","getContinuityWinGetInfo","getContinuityWinGetAward","winCount","startMatchPlayer","nExt","nBaseScore","getMatchResult","RWaitId","exitMatchList","getPrivateRoomInfo","removeLoading","nRoomNo","RoomNo","onMathEnd","szServerIP","ServerIP","nPort","Port","nChairCount","ChairNum","gameLibSink","m_nChairCount","s_nPrivateRoomTableNo","TableNo","s_nPrivateRoomChairNo","ChairNo","getGameLib","enterGameRoomByIP","enterGameByRoomNo","getDivisionGetInfo","getDivisionUpAwardGetInfo","getDivisionUpAwardGetAward","levelUpTo","myOpenId","getProtectScoreShareReward","sn","score","OpenId","getUpgradeRewardOnResult","getGetHotAndLastPlayGame"],"mappings":"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","file":"HallWebRequest.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\hall","sourcesContent":["import { Domain } from \"./Domain\";\r\nimport { TSCommon } from \"./TSCommon\";\r\nvar HallWebRequest = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    statics: {\r\n        instance: null\r\n    },\r\n\r\n    ctor: function () {\r\n        this.m_checkStatusCount = HallWebRequest.ACTIVE_CHECK_STATUS_COUNT - 1\r\n    },\r\n\r\n    //得到根URL+address\r\n    getAddress: function (url) {\r\n        return Domain.WebRoot + url;\r\n    },\r\n\r\n\r\n    getGameAddress:function(url){\r\n        return Domain.GameWebRoot + url;\r\n    },\r\n\r\n    isCheckStatus:function(){\r\n        this.m_checkStatusCount = this.m_checkStatusCount + 1\r\n        if (this.m_checkStatusCount < HallWebRequest.ACTIVE_CHECK_STATUS_COUNT){\r\n            return true\r\n        }\r\n        return this.m_checkStatusCount % HallWebRequest.ACTIVE_CHECK_STATUS_COUNT == 0\r\n    },\r\n\r\n    refreshCheckStatus:function(){\r\n        this.m_checkStatusCount = 0\r\n    },\r\n\r\n    //http请求\r\n    httpRequest: function (file, data, onRetCallBack, post) {\r\n        if(file != \"CheckNewStatus.aspx\" && file != \"WxNewUserTrace.aspx\"){\r\n            require('HallResources').getInstance().showLoading();\r\n        }\r\n        if(post == null || post == undefined){\r\n            post = true;\r\n        }\r\n        var address = this.getAddress(file);\r\n        TSCommon.log(address);\r\n        var WebRequest = require('WebRequest');\r\n        var webRequest = new WebRequest();\r\n        webRequest.getData(address, data, onRetCallBack, post)\r\n\r\n        if(file == \"CheckNewStatus.aspx\"){\r\n            return;\r\n        }\r\n\r\n        var instance = HallWebRequest.getInstance();\r\n        instance.refreshCheckStatus();\r\n    },\r\n\r\n\r\n    //游戏相关的http请求\r\n    gameHttpRequest:function(file, data, onRetCallBack, post){\r\n\r\n        //如果不是轮询获取匹配状态\r\n        if(file != \"WaitGetUserInfo.aspx\"){\r\n            require('HallResources').getInstance().showLoading();\r\n        }\r\n\r\n        if(post == null || post == undefined){\r\n            post = true;\r\n        }\r\n        var address = this.getGameAddress(file);\r\n        TSCommon.log(address);\r\n        TSCommon.log(data);\r\n        var WebRequest = require('WebRequest');\r\n        var webRequest = new WebRequest();\r\n        webRequest.getData(address, data, onRetCallBack, post)\r\n    },\r\n\r\n    //上报记录日志给服务器\r\n    reportRecordLogToServer:function(traceID){\r\n        var publicUserInfo = require(\"HallControl\").getInstance().getPublicUserInfo();\r\n        var szData = \"UserID=\" + publicUserInfo.userDBID + \"&TraceID=\" + traceID + \"&apptype=1\";\r\n        var httpCallback = function(success, data){\r\n            var jsonObject = JSON.parse(data);\r\n            var RetCode = jsonObject.RetCode;\r\n            if(parseInt(RetCode) == 11){\r\n                console.log(\"the user is not exist\");\r\n            }\r\n        };\r\n        this.httpRequest(\"WxNewUserTrace.aspx\", szData, httpCallback);\r\n    },\r\n\r\n\r\n    //状态轮询\r\n    checkNewStatus:function(){\r\n        var self = this;\r\n        var HallResources = require(\"HallResources\");\r\n        var checkNew = function(){\r\n            var publicUserInfo = require(\"HallControl\").getInstance().getPublicUserInfo()\r\n            var szData = \"UserID=\" + publicUserInfo.userDBID + \"&GameID=24&Pay=0&apptype=1\";\r\n            var httpCallback = function(success, data){\r\n                cc.log(\"success ========\" + success);\r\n                if(!success){\r\n                    return;\r\n                }\r\n\r\n                var jsonObject = JSON.parse(data).table[0];\r\n\r\n                var nNewMail = jsonObject.MailTip;\r\n                var nNewFriend = jsonObject.NewFriendTip;\r\n                var nRank = jsonObject.PayRandkTip;\r\n                var nNewPayment = jsonObject.PayTip;\r\n                var nGold = jsonObject.Amount;\r\n                var bankAmount = jsonObject.BankAmount;\r\n                var nDiamond = jsonObject.DiamondAmount;\r\n                var nFrag = jsonObject.FragNum;\r\n                var nServiceTip = jsonObject.ServiceMessageTip;\r\n                var nClubCard = jsonObject.ClubCard;\r\n                var nPlayerQualifyingScore = jsonObject.sc;\r\n\r\n                if(nDiamond != publicUserInfo.nDiamond || nGold != publicUserInfo.nGold){\r\n                    publicUserInfo.nDiamond = nDiamond;\r\n                    publicUserInfo.nGold = nGold\r\n                    //派发金币数量已经改变的消息\r\n                    TSCommon.dispatchEvent(HallResources.onGoldOrDiamondChanged)\r\n                }\r\n\r\n                if(nPlayerQualifyingScore != publicUserInfo.nPlayerQualifyingScore ){\r\n                    publicUserInfo.nPlayerQualifyingScore = nPlayerQualifyingScore;\r\n                    //派发当前积分修改的消息\r\n                    TSCommon.dispatchEvent(HallResources.onChangePlayerQualifyingScore)\r\n                }\r\n            }\r\n\r\n            if(self.isCheckStatus()){\r\n                self.httpRequest(\"CheckNewStatus.aspx\",szData,httpCallback)\r\n            }\r\n\r\n            //停止定时器\r\n            var scheduler = cc.director.getScheduler();\r\n\t\t    scheduler.unscheduleCallbackForTarget(this, checkNew)\r\n            self.checkNewStatus();\r\n        }\r\n\r\n        var scheduler = cc.director.getScheduler();\r\n\t\tscheduler.scheduleCallbackForTarget(this, checkNew, 5, false, 0, false)\r\n    },\r\n\r\n    //请求通告\r\n    requestNotice: function (onRetCallBack) {\r\n        var publicUserInfo = require(\"HallControl\").getInstance().getPublicUserInfo();\r\n        var szData = \"UserID=\" + publicUserInfo.userDBID;\r\n        this.httpRequest(\"GetAgentWord.aspx\", szData, onRetCallBack);\r\n    },\r\n\r\n    //获取道具\r\n    getProperty: function (onRetCallBack) {\r\n        var publicUserInfo = require(\"HallControl\").getInstance().getPublicUserInfo();\r\n        var szData = \"UserID=\" + publicUserInfo.userDBID;\r\n        this.httpRequest(\"GetToolList.aspx\", szData, onRetCallBack);\r\n    },\r\n\r\n    //获取是否收藏过了\r\n    getCollectInfo: function (onRetCallBack) {\r\n        var publicUserInfo = require(\"HallControl\").getInstance().getPublicUserInfo();\r\n        var szData = \"UserID=\" + publicUserInfo.userDBID+\"&AppType=1\";\r\n        this.httpRequest(\"WxFavAwardGetInfo.aspx\", szData, onRetCallBack);\r\n    },\r\n\r\n    //获得收藏奖励金币\r\n    getCollectReward:function(onRetCallBack) {\r\n        var publicUserInfo = require(\"HallControl\").getInstance().getPublicUserInfo();\r\n        var szData = \"UserID=\" + publicUserInfo.userDBID + \"&EPassword=\"+publicUserInfo.encryptPassword+\"&AppType=1\";\r\n        this.httpRequest(\"WxFavAwardGetAward.aspx\", szData, onRetCallBack);\r\n    },\r\n\r\n     //获取破产奖励次数\r\n    getBankruptInfo: function (onRetCallBack) {\r\n        var publicUserInfo = require(\"HallControl\").getInstance().getPublicUserInfo();\r\n        var szData = \"UserID=\" + publicUserInfo.userDBID+\"&AppType=1\";\r\n        this.httpRequest(\"WxBankruptAwardGetInfo.aspx\", szData, onRetCallBack);\r\n    },\r\n\r\n     //获得破产奖励金币\r\n     getBankruptReward:function(onRetCallBack) {\r\n        var publicUserInfo = require(\"HallControl\").getInstance().getPublicUserInfo();\r\n        var szData = \"UserID=\" + publicUserInfo.userDBID + \"&EPassword=\"+publicUserInfo.encryptPassword+\"&AppType=1\";\r\n        this.httpRequest(\"WxBankruptAwardGetAward.aspx\", szData, onRetCallBack);\r\n    },\r\n    \r\n    //获取每日登陆数据\r\n    getDailyCheckInfo: function (onRetCallBack) {\r\n        var publicUserInfo = require(\"HallControl\").getInstance().getPublicUserInfo();\r\n        var szData = \"UserID=\" + publicUserInfo.userDBID+\"&AppType=1\";\r\n        this.httpRequest(\"GetSignInfo.aspx\", szData, onRetCallBack);\r\n    },\r\n\r\n    //获得每日登陆奖励接口\r\n    sendDailyCheck:function(onRetCallBack) {\r\n        var publicUserInfo = require(\"HallControl\").getInstance().getPublicUserInfo();\r\n        var szData = \"UserID=\" + publicUserInfo.userDBID + \"&EPassword=\"+publicUserInfo.encryptPassword+\"&AppType=1\";\r\n        this.httpRequest(\"DailySignInfo.aspx\", szData, onRetCallBack);\r\n    },\r\n\r\n    //获得拉黑数据\r\n    requestIsBeReport: function (userDBID, onRetCallBack) {\r\n\r\n        var publicUserInfo = require(\"HallControl\").getInstance().getPublicUserInfo();\r\n        var szData = \"UserID=\" + publicUserInfo.userDBID + \"&pwd=\" + publicUserInfo.encryptPassword + \"&ToUserID=\" + userDBID;\r\n        this.httpRequest(\"CheatInfo.aspx\", szData, onRetCallBack);\r\n    },\r\n\r\n    //发送拉黑请求\r\n    requestCheatReport: function (userDBID, nType, onRetCallBack) {\r\n\r\n        var publicUserInfo = require(\"HallControl\").getInstance().getPublicUserInfo();\r\n        var szData = \"UserID=\" + publicUserInfo.userDBID + \"&pwd=\" + publicUserInfo.encryptPassword + \"&ToUserID=\" + userDBID + \"&type=\" + nType;\r\n        this.httpRequest(\"CheatReport.aspx\", szData, onRetCallBack);\r\n    },\r\n\r\n    //获得邀请好友活动数据\r\n    getWxInviteActivityInfo:function(onRetCallBack)\r\n    {\r\n        var szData = \"apptype=1\";\r\n        this.httpRequest(\"WxInviteAwardGetActivityInfo.aspx\", szData, onRetCallBack); \r\n    },\r\n    \r\n    //获得我邀请的好友的数据\r\n    getWxInviteAwardGetInfo:function(myOpenID,onRetCallBack)\r\n    {\r\n        var szData = \"OpenID=\" + myOpenID + \"&apptype=1\";\r\n        this.httpRequest(\"WxInviteAwardGetInfo.aspx\", szData, onRetCallBack); \r\n    },\r\n\r\n    //保存我的微信数据\r\n    setWxUserInfo:function(myOpenID,WxFaceUrl,WxNickName,onRetCallBack)\r\n    {\r\n        //http://netgate.ss2007.com/Platform/WxUserInfoSet.aspx?OpenID=o8LHuws48gtYrc0DFXIAB2M7bGqc&WxFaceUrl=xxx&WxNickName=xxx&apptype=1\r\n        var szData = \"OpenID=\" + myOpenID + \"&WxFaceUrl=\" +WxFaceUrl + \"&WxNickName=\" +WxNickName+\"&apptype=1\";\r\n        console.log(\"传参给我们的服务器szData=\"+szData)\r\n        this.httpRequest(\"WxUserInfoSet.aspx\", szData, onRetCallBack); \r\n    },\r\n\r\n    //通过openid获得微信头像和昵称\r\n    getWxUserInfo:function(playerOpenID,onRetCallBack)\r\n    {\r\n        //http://netgate.ss2007.com/Platform/WxUserInfoGet.aspx?OpenID=o8LHuws48gtYrc0DFXIAB2M7bGqc&apptype=1\r\n        var szData = \"OpenID=\" + playerOpenID + \"&apptype=1\";\r\n        this.httpRequest(\"WxUserInfoGet.aspx\", szData, onRetCallBack); \r\n    },\r\n\r\n    //通过userID获取用户信息\r\n    getWxUserInfoByUserID:function(userID, onRetCallBack){\r\n        var szData = \"UserID=\" + userID + \"&apptype=1\";\r\n        this.httpRequest(\"WxUserInfoGetByUserID.aspx\", szData, onRetCallBack, false); \r\n    },\r\n\r\n    //获得微信邀请奖励\r\n    getWxInviteAwardGetAward:function(inviterOpenID,inviteeOpenID,onRetCallBack)\r\n    {\r\n        //http://netgate.ss2007.com/Platform/WxInviteAwardGetAward.aspx?InviterOpenID=o8LHuws48gtYrc0DFXIAB2M7bGqc&InviteeOpenID=o8LHuws48gtYrc0DFXIAB2M7bGqc&apptype=1\r\n        var szData = \"InviterOpenID=\" + inviterOpenID +\"&InviteeOpenID=\"+ inviteeOpenID+\"&apptype=1\";\r\n        this.httpRequest(\"WxInviteAwardGetAward.aspx\", szData, onRetCallBack); \r\n    },\r\n    \r\n    //请求玩家数据\r\n    getPlayerData: function (friendsOpenID,onRetCallBack) {\r\n        //http://netgate.ss2007.com/Platform/WxFriendsScoreRank.aspx?FriendsOpenID=o8LHuws48gtYrc0DFXIAB2M7bGqc,o8LHuws48gtYrc0DFXIAB2M7bGqc,o8LHuws48gtYrc0DFXIAB2M7bGqc&apptype=1\r\n        var szData = \"FriendsOpenID=\" + friendsOpenID + \"&apptype=1\";\r\n        this.httpRequest(\"WxFriendsScoreRank.aspx\", szData, onRetCallBack);\r\n    },\r\n\r\n    //玩家数据\r\n    getPlayerWinState: function (onRetCallBack) {\r\n        //http://netgate.ss2007.com/Platform/WxGetWinStat.aspx?UserID=1817175&apptype=1\r\n        var publicUserInfo = require(\"HallControl\").getInstance().getPublicUserInfo();\r\n        var szData = \"UserID=\" + publicUserInfo.userDBID + \"&apptype=1\";\r\n        this.httpRequest(\"WxGetWinStat.aspx\", szData, onRetCallBack);\r\n    },\r\n    \r\n    //玩家钻石数目\r\n    getPlayerDiamondCount: function (myOpenID,onRetCallBack) {\r\n        //http://h5cxz.ss2007.com/platform/xcxGetUserBalance.aspx?AppType=1&UserID=94214178&pwd=8b8e3f9ab0c8b2a3ee9323001b6044af&openid=okfMq5DPnFvKc3Le5p_YNd7O0qds\r\n        var publicUserInfo = require(\"HallControl\").getInstance().getPublicUserInfo();\r\n        var szData = \"AppType=1\"+\"&UserID=\" + publicUserInfo.userDBID + \"&pwd=\"+ publicUserInfo.encryptPassword + \"&openid=\"+myOpenID;\r\n        this.httpRequest(\"xcxGetUserBalance.aspx\", szData, onRetCallBack);\r\n    },\r\n\r\n    exchangeMoneyByDiamond: function (needDiamond,myOpenID,onRetCallBack) {\r\n        //http://localhost:23314/xcxDiamondExchangeGold.aspx??AppType=1&UserID=94214178&pwd=8b8e3f9ab0c8b2a3ee9323001b6044af&openid=okfMq5DPnFvKc3Le5p_YNd7O0qds&wda=10\r\n        var publicUserInfo = require(\"HallControl\").getInstance().getPublicUserInfo();\r\n        var szData = \"AppType=1\"+\"&UserID=\" + publicUserInfo.userDBID + \"&pwd=\"+ publicUserInfo.encryptPassword + \"&openid=\"+myOpenID + \"&wda=\" + needDiamond;\r\n        this.httpRequest(\"xcxDiamondExchangeGold.aspx\", szData, onRetCallBack);\r\n    },\r\n\r\n    //获取群分享得钻石信息查询\r\n    getWxShareDiamondAwardGetInfo: function (onRetCallBack) {\r\n        // http://h5cxz.ss2007.com/Platform/WxShareDiamondAwardGetInfo.aspx?UserID=48643639&apptype=1\r\n        var publicUserInfo = require(\"HallControl\").getInstance().getPublicUserInfo();\r\n        var szData = \"UserID=\" + publicUserInfo.userDBID + \"&apptype=1\";\r\n        this.httpRequest(\"WxShareDiamondAwardGetInfo.aspx\", szData, onRetCallBack);\r\n    },\r\n\r\n    //微信群分享领钻石\r\n    getWxShareDiamondAwardGetAward: function (encryptedData,iv,myOpenID,onRetCallBack) {\r\n        //  http://h5cxz.ss2007.com/Platform/WxShareDiamondAwardGetAward.aspx?UserID=48643639&EPassword=973f6b61cdef4726385367b702237c13&WxGroupID=ABCD&apptype=1\r\n        // 参数说明\r\n        // UserID 用户ID\r\n        // EPassword 密码\r\n        // OpenID --用户openid\r\n        // encryptedData --分享回调参数\r\n        // iv --分享回调参数\r\n        //因为 encryptedData 和 iv 里面含有特殊字符(+ - / 之类的)  在url里面不能不能解析 或者解析出错  所以需要用到下面的方法进行编码\r\n        var encryptedData = require(\"HallUtils\").encodeURIComponent(encryptedData);\r\n        var iv =require(\"HallUtils\").encodeURIComponent(iv);\r\n        var publicUserInfo = require(\"HallControl\").getInstance().getPublicUserInfo();\r\n        var szData = \"UserID=\" + publicUserInfo.userDBID + \"&EPassword=\"+ publicUserInfo.encryptPassword + \"&OpenID=\" + myOpenID + \"&encryptedData=\"+encryptedData+\"&iv=\"+iv+\"&apptype=1\";\r\n        this.httpRequest(\"WxShareDiamondAwardGetAward.aspx\", szData, onRetCallBack);\r\n    },\r\n\r\n    //获取微信群ID接口\r\n    getWxAESDecript: function (myOpenID,encryptedData,iv,onRetCallBack) {\r\n        //http://h5cxz.ss2007.com/Platform/WxAESDecript.aspx?OpenID=xxx&encryptedData=yk0WAY37Eburvqjgl3MFPjD7kytIBK644WePmuThr0h5MWwsZ5xh5TxYvUtVWWQheQyf6N45eIl3v2DrUcSMz6rIrG/n5m3K+hhzsZk3kDcTdhDJ/ZYbxTDXQVq7wGiYBOAT90I9DzBF00SRMRaZ8A==\r\n        // &iv=9TOuEdLgP8P4AqH51qh/4Q==\r\n        //因为 encryptedData 和 iv 里面含有特殊字符(+ - / 之类的)  在url里面不能不能解析 或者解析出错  所以需要用到下面的方法进行编码\r\n        var encryptedData = require(\"HallUtils\").encodeURIComponent(encryptedData);\r\n        var iv =require(\"HallUtils\").encodeURIComponent(iv);\r\n        var szData = \"OpenID=\"+myOpenID +\"&encryptedData=\" + encryptedData + \"&iv=\"+iv;\r\n        this.httpRequest(\"WxAESDecript.aspx\", szData, onRetCallBack);\r\n    },\r\n    //排位赛连胜奖励查询\r\n    getContinuityWinGetInfo: function (onRetCallBack) {\r\n        //http://h5cxz.ss2007.com/Platform/ContinuityWinGetInfo.aspx?userid=48643639&apptype=1\r\n        var publicUserInfo = require(\"HallControl\").getInstance().getPublicUserInfo();\r\n        var szData = \"userid=\" + publicUserInfo.userDBID + \"&apptype=1\";\r\n        this.httpRequest(\"ContinuityWinGetInfo.aspx\", szData, onRetCallBack);\r\n    },\r\n    \r\n    //排位赛连胜领奖\r\n    getContinuityWinGetAward: function (winCount,onRetCallBack) {\r\n        //http://h5cxz.ss2007.com/Platform/ContinuityWinGetAward.aspx?UserID=48643639&EPassword=973f6b61cdef4726385367b702237c13&WinCount=7&apptype=1\r\n        var publicUserInfo = require(\"HallControl\").getInstance().getPublicUserInfo();\r\n        var szData = \"userid=\" + publicUserInfo.userDBID +\"&EPassword=\"+ publicUserInfo.encryptPassword +\"&WinCount=\" + winCount + \"&apptype=1\";\r\n        this.httpRequest(\"ContinuityWinGetAward.aspx\", szData, onRetCallBack);\r\n    },\r\n\r\n    //排位赛开始匹配\r\n    startMatchPlayer:function(nExt, nBaseScore, onRetCallBack){\r\n        //http://h5cxz.ss2007.com/yjly/WaitUserStart.aspx?UserID=64014&epw=ff7b1165b9479c9f9df839efe556423b&Ext=300000000&BaseScore=1&AppType=1\r\n\r\n        var publicUserInfo = require(\"HallControl\").getInstance().getPublicUserInfo();\r\n        var szData = \"UserID=\" + publicUserInfo.userDBID +\"&epw=\"+ publicUserInfo.encryptPassword + \"&Ext=\" + nExt + \"&BaseScore=\" + nBaseScore + \"&AppType=1\"\r\n\r\n        this.gameHttpRequest(\"WaitUserStart.aspx\", szData, onRetCallBack);\r\n    },\r\n\r\n    //获取匹配结果\r\n    getMatchResult:function(RWaitId, onRetCallBack){\r\n        //http://h5cxz.ss2007.com/yjly/WaitGetUserInfo.aspx?AppType=1&UserID=64014&RWaitId=3\r\n        var publicUserInfo = require(\"HallControl\").getInstance().getPublicUserInfo();\r\n        var szData = \"UserID=\" + publicUserInfo.userDBID + \"&RWaitId=\" + RWaitId + \"&AppType=1\";\r\n        this.gameHttpRequest(\"WaitGetUserInfo.aspx\", szData, onRetCallBack);\r\n    },\r\n   \r\n    //退出匹配\r\n    exitMatchList:function(onRetCallBack){\r\n        //http://h5cxz.ss2007.com/yjly/WaitUserQuit.aspx?UserID=64014&epw=ff7b1165b9479c9f9df839efe556423b&AppType=1\r\n        var publicUserInfo = require(\"HallControl\").getInstance().getPublicUserInfo();\r\n        var szData = \"UserID=\" + publicUserInfo.userDBID +\"&epw=\"+ publicUserInfo.encryptPassword + \"&AppType=1\";\r\n        this.gameHttpRequest(\"WaitUserQuit.aspx\", szData, onRetCallBack);\r\n    },\r\n\r\n    //获取房间信息\r\n    getPrivateRoomInfo:function(){\r\n        var publicUserInfo = require(\"HallControl\").getInstance().getPublicUserInfo();\r\n        var szData = \"UserID=\" + publicUserInfo.userDBID + \"&AppType=1\";\r\n        var httpCallback = function(success, data){\r\n            require('HallResources').getInstance().removeLoading();\r\n            if(success){\r\n                var jsonObject = JSON.parse(data).table[0];      \r\n                var nRoomNo = parseInt(jsonObject.RoomNo);\r\n                if(nRoomNo > 0){\r\n                    var onMathEnd = function(success, data){\r\n                        // require('HallResources').getInstance().removeLoading();\r\n                        if(success){\r\n                            \r\n                            var jsonObject = JSON.parse(data).table[0];\r\n\r\n                            var szServerIP = jsonObject.ServerIP;\r\n\r\n                            var nPort = parseInt(jsonObject.Port);\r\n\r\n                            var nChairCount = parseInt(jsonObject.ChairNum);\r\n\r\n                            var gameLibSink = require('GameLibSink').getInstance();\r\n\r\n                            gameLibSink.m_nChairCount = nChairCount;\r\n\r\n                            gameLibSink.s_nPrivateRoomTableNo = parseInt(jsonObject.TableNo) //无效私人房桌子号\r\n                            gameLibSink.s_nPrivateRoomChairNo = parseInt(jsonObject.ChairNo) //无效私人房椅子号\r\n\r\n                            gameLibSink.getGameLib().enterGameRoomByIP(szServerIP, nPort);\r\n                        }\r\n                    }\r\n\r\n                    require('HallWebRequest').getInstance().enterGameByRoomNo(nRoomNo, onMathEnd)\r\n                }\r\n            }\r\n        }\r\n        // this.gameHttpRequest(\"GetPrivateRoomInfo.aspx\", szData, httpCallback);\r\n    },\r\n\r\n    //查询玩家段位信息\r\n    getDivisionGetInfo: function (onRetCallBack) {\r\n        //http://h5cxz.ss2007.com/Platform/DivisionGetInfo.aspx?userid=78972489&apptype=1\r\n        var publicUserInfo = require(\"HallControl\").getInstance().getPublicUserInfo();\r\n        var szData = \"userid=\" + publicUserInfo.userDBID + \"&apptype=1\";\r\n        this.httpRequest(\"DivisionGetInfo.aspx\", szData, onRetCallBack);\r\n    },\r\n\r\n    //通过房号进入游戏\r\n    enterGameByRoomNo:function(nRoomNo, onRetCallBack){\r\n        var publicUserInfo = require(\"HallControl\").getInstance().getPublicUserInfo();\r\n        var szData = \"UserID=\" + publicUserInfo.userDBID + \"&RoomNo=\" + nRoomNo + \"&AppType=1\";\r\n        this.gameHttpRequest(\"EnterPrivateRoom.aspx\", szData, onRetCallBack);\r\n    },\r\n\r\n    //段位升级奖励查询\r\n    getDivisionUpAwardGetInfo: function (onRetCallBack) {\r\n        //http://h5cxz.ss2007.com/Platform/DivisionUpAwardGetInfo.aspx?userid=78972489&apptype=1\r\n        var publicUserInfo = require(\"HallControl\").getInstance().getPublicUserInfo();\r\n        var szData = \"userid=\" + publicUserInfo.userDBID + \"&apptype=1\";\r\n        this.httpRequest(\"DivisionUpAwardGetInfo.aspx\", szData, onRetCallBack);\r\n    },\r\n\r\n    //段位升级奖励领取\r\n    getDivisionUpAwardGetAward: function (levelUpTo,myOpenId,onRetCallBack) {\r\n        //http://h5cxz.ss2007.com/Platform/DivisionUpAwardGetAward.aspx?UserID=97245805&EPassword=5214a7601aec2027b95b8b79cc9295b8&LevelUpTo=6&OpenId=xxxxxxx&apptype=1\r\n        var publicUserInfo = require(\"HallControl\").getInstance().getPublicUserInfo();\r\n        var szData = \"userid=\" + publicUserInfo.userDBID + \"&EPassword=\"+ publicUserInfo.encryptPassword+\"&LevelUpTo=\" + levelUpTo +\"&OpenId=\"+ myOpenId + \"&apptype=1\";\r\n        this.httpRequest(\"DivisionUpAwardGetAward.aspx\", szData, onRetCallBack);\r\n    },\r\n\r\n\r\n    //分享保分奖励\r\n    getProtectScoreShareReward:function(sn, score, OpenId, encryptedData, iv, onRetCallBack){\r\n        //http://h5cxz.ss2007.com/yjly/GetKeepScoreAward.aspx?UserID=1&epw=1&sn=1&ks=-10&OpenId=1&encryptedData=1&iv=&AppType=1\r\n        var publicUserInfo = require(\"HallControl\").getInstance().getPublicUserInfo();\r\n        var encryptedData = require(\"HallUtils\").encodeURIComponent(encryptedData);\r\n        var iv = require(\"HallUtils\").encodeURIComponent(iv);\r\n        \r\n        var szData = \"UserID=\" + publicUserInfo.userDBID +\"&epw=\"+ publicUserInfo.encryptPassword + \"&sn=\" + sn + \"&ks=\" + score + \"&OpenId=\" + OpenId\r\n         + \"&encryptedData=\" + encryptedData + \"&iv=\" + iv + \"&AppType=1\";\r\n\r\n        this.gameHttpRequest(\"GetKeepScoreAward.aspx\", szData, onRetCallBack);\r\n    },\r\n\r\n    //牌局结束后段位升级奖励\r\n    getUpgradeRewardOnResult:function(levelUpTo, myOpenId, onRetCallBack){\r\n        console.log(\"getUpgradeRewardOnResult ------- levelUpTo ===== \" + levelUpTo);\r\n        //http://h5cxz.ss2007.com/Platform/DivisionUpShareAwardGetAward.aspx?UserID=97245805&EPassword=5214a7601aec2027b95b8b79cc9295b8&LevelUpTo=20&OpenId=xxxxxxx&encryptedData=xxx&iv=xxxxxx&apptype=1\r\n        var publicUserInfo = require(\"HallControl\").getInstance().getPublicUserInfo();\r\n        var szData = \"UserID=\" + publicUserInfo.userDBID +\"&EPassword=\"+ publicUserInfo.encryptPassword+\"&LevelUpTo=\" + levelUpTo +\"&OpenId=\"+ myOpenId + \"&AppType=1\";\r\n        this.httpRequest(\"DivisionUpShareAwardGetAward.aspx\", szData, onRetCallBack);\r\n    },\r\n\r\n    //查询火爆常玩游戏\r\n    getGetHotAndLastPlayGame:function(onRetCallBack){\r\n        //http://h5cxz.ss2007.com/Platform/GetHotAndLastPlayGame.aspx?userid=97245805&apptype=1\r\n        var publicUserInfo = require(\"HallControl\").getInstance().getPublicUserInfo();\r\n        var szData = \"userid=\" + publicUserInfo.userDBID +\"&apptype=1\";\r\n        this.httpRequest(\"GetHotAndLastPlayGame.aspx\", szData, onRetCallBack);\r\n    },\r\n});\r\n\r\nHallWebRequest.ACTIVE_CHECK_STATUS_COUNT = 6\r\n\r\nHallWebRequest.getInstance = function () {\r\n    if (HallWebRequest.instance == null) {\r\n        HallWebRequest.instance = new HallWebRequest();\r\n    }\r\n    return HallWebRequest.instance;\r\n};\r\n\r\n\r\n"]}