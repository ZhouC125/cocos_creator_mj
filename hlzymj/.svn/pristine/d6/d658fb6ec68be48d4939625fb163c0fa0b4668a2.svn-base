{"version":3,"sources":["HallResources.js"],"names":["HallResources","cc","Class","statics","instance","Loading_Add_Scene_Tag","Toast_Add_Scene_Tag","showDialog","strMsg","sceneNode","director","getScene","winSize","getWinSize","loader","loadRes","error","prefab","dialogPrefab","instantiate","x","width","y","height","dialog","getComponent","setContentLabelStr","addChild","showLoading","TSCommon","dispatchEvent","onShowLoadingNode","removeLoading","onClearLoadingNode","showToast","nodeToast","Node","toastNode","addComponent","ToastUI","setMsg","setTag","setQualifyingData","rankData","division","allData","Array","backData","i","length","DivisionLevel","maxScore","MaxScore","minScore","MinScore","diamond","UpgradeAmount","rankName","HighName","cupId","push","divisionData","getRankDataById","id","getDivisionData","rankScore","getRankAndStarByScore","starCount","Math","floor","StartStep","ConfigID","cup","star","lvStarNextScore","LittleName","getLianXiChangStation","gameId","sortFunction","stStation1","stStation2","dwRuleID","gameLibSink","require","getInstance","gameLib","getGameLib","pStationList","getStationList","size","pLianXiStaionList","dwParentID","sort","enterGameRoomBeanByStaionName","stationName","onCallBack","publicUserInfo","getPublicUserInfo","room","szStationName","nGold","dwMinGold","console","log","onShowFlyMessage","onNoEnoughGold","autoEnterGameRoom","playButtonEffect","parseInt","sys","localStorage","getItem","audioUrl","audioEngine","play","url","raw","playCloseEffect","showGoldTips","msg","isFlyUp","isShowIcon","offsetY","scene","getChildByTag","COMMON_FLY_TIPS","toastSprite","Sprite","SpriteFrame","err","spriteFrame","iconNode","iconSprite","anchorX","tipsNode","tipsLabel","Label","string","fontSize","delayTime","fadeOut","moveBy","onEnd","callFunc","stopAction","removeFromParent","sequence","spawn","runAction","getEnterBestRoom","gameName","server","dwFocusStationID","nMinGold","logonInfo","getUserLogonInfo","pRoomList","bContinues","dwStationID","dwGold","nTempMinGold","recordList","register_success","main_res_start","main_res_end","choose_method","enter_room","room_res_start","room_res_end","click_ready","click_card","click_discard","count_page","recordPlayerLogToServer","recordID","PublicUserInfo","isNewUser","reportRecordLogToServer","onLoginFinish","onGoldOrDiamondChanged","onClearDailyLoginRedPoint","onGetMoreDeskBg","onClearCollectionLoginRedPoint","onClearConsecutiveRedPoint","openBgMusic","closeBgMusic","onRefreshPlayerDiamondCount","onChangeShadow","onChangePlayerQualifyingScore","onSeasonLevelUp","groupShareImgUrl","shareImgUrl","rupShareImgUrl","resultShareImgUrl","protectScoreShareImgUrl","upgradeShareImgUrl","shareWin_3","shareWin_5","shareWin_7","shareWin_9","module","exports"],"mappings":"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","file":"HallResources.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\hall","sourcesContent":["import {TSCommon} from \"TSCommon\";\r\nvar HallResources = cc.Class({\r\n    statics: {\r\n        instance: null,\r\n        //增加在场景上的全局 Tag\r\n        Loading_Add_Scene_Tag: 1000,\r\n        Toast_Add_Scene_Tag: 1001,\r\n    },\r\n    \r\n    showDialog: function (strMsg) {\r\n        var sceneNode = cc.director.getScene();\r\n        var winSize = cc.director.getWinSize();\r\n        cc.loader.loadRes(\"/prefabs/publicDialogPrefab\", function (error, prefab) {\r\n            if (!error) {\r\n                var dialogPrefab = cc.instantiate(prefab);\r\n                dialogPrefab.x = winSize.width / 2;\r\n                dialogPrefab.y = winSize.height / 2;\r\n                var dialog = dialogPrefab.getComponent('Dialog');\r\n                dialog.setContentLabelStr(strMsg);\r\n                sceneNode.addChild(dialogPrefab);\r\n            }\r\n        })\r\n    },\r\n\r\n    showLoading: function () {\r\n        TSCommon.dispatchEvent(HallResources.onShowLoadingNode, true );\r\n        // var nodeLoading = new cc.Node('loading');\r\n        // nodeLoading.addComponent(cc.LoadingUI);\r\n        // nodeLoading.setTag(HallResources.Loading_Add_Scene_Tag);\r\n        // cc.director.getScene().addChild(nodeLoading);\r\n    },\r\n\r\n    removeLoading: function () {\r\n        TSCommon.dispatchEvent(HallResources.onClearLoadingNode, true );\r\n        // var nodeLoading = cc.director.getScene().getChildByTag(HallResources.Loading_Add_Scene_Tag);\r\n        // if (nodeLoading != null) {\r\n        //     nodeLoading.destroy();\r\n        //     nodeLoading = null;\r\n        // }\r\n    },\r\n\r\n    showToast: function (strMsg) {\r\n        var nodeToast = new cc.Node('nodeToast');\r\n        var toastNode = nodeToast.addComponent(cc.ToastUI);\r\n        toastNode.setMsg(strMsg);\r\n        nodeToast.setTag(HallResources.Toast_Add_Scene_Tag);\r\n        cc.director.getScene().addChild(nodeToast);\r\n    },\r\n    \r\n    //存储天梯等级数据结构，方便以后调用(按照青铜一，青铜二，白银一排序)\r\n    setQualifyingData:function(rankData){\r\n        this.rankData = rankData;\r\n        //下面一段为了把同一个等阶的数据提出来存在一个表里\r\n        var division = 1;\r\n        var allData = new Array();\r\n        while(division <= 6)  {\r\n            var backData = new Array();\r\n            for (var i = 0;i<rankData.length;i++){\r\n                if (rankData[i].DivisionLevel == division){\r\n                    backData.maxScore = rankData[i].MaxScore;\r\n                    backData.minScore = rankData[i].MinScore;\r\n                }\r\n            }\r\n\r\n            for (var i = 0;i<rankData.length;i++){\r\n                if (rankData[i].DivisionLevel == division){\r\n                    backData.diamond = rankData[i].UpgradeAmount\r\n                    backData.rankName = rankData[i].HighName;\r\n                    if (backData.minScore > rankData[i].MinScore){ backData.minScore = rankData[i].MinScore; }\r\n                    if (backData.maxScore < rankData[i].MaxScore){ backData.maxScore = rankData[i].MaxScore; }\r\n                    backData.cupId = division;\r\n                }\r\n            }\r\n            allData.push(backData);\r\n            division = division + 1;\r\n        }\r\n        this.divisionData = allData;\r\n    },\r\n\r\n    //返回按照天梯等级排序后的等级数据(按照青铜，白银排序)\r\n    getRankDataById: function (id) {\r\n        return this.rankData[id-1];\r\n    },\r\n\r\n    //返回按照天梯等级排序后的等级数据(按照青铜，白银排序)\r\n    getDivisionData: function (rankScore) {\r\n        return this.divisionData;\r\n    },\r\n    //传入底分和数据结构，拿到当前星级，等阶，细分等阶,细分等阶名称\r\n    getRankAndStarByScore: function (rankScore) {\r\n        var backData = new Array();\r\n        var rankData = this.rankData;\r\n        for (var i = 0;i < rankData.length;i++){\r\n            if (rankScore >= rankData[i].MinScore && rankScore < rankData[i].MaxScore){\r\n                var starCount =Math.floor((rankScore -rankData[i].MinScore) /rankData[i].StartStep)\r\n                backData.minScore =  rankData[i].MinScore;\r\n                backData.maxScore =  rankData[i].MaxScore;\r\n                backData.id =  rankData[i].ConfigID;\r\n                backData.cup = rankData[i].DivisionLevel;\r\n                backData.star = starCount;\r\n                backData.lvStarNextScore = rankData[i].MinScore + rankData[i].StartStep * (backData.star + 1);\r\n                backData.rankName = rankData[i].LittleName + \"阶\";\r\n                return backData;\r\n            }\r\n            if ((i == 19) && (rankScore >= rankData[i].minScore)){\r\n                backData.minScore =  rankData[i].MinScore;\r\n                backData.maxScore =  rankData[i].MaxScore;\r\n                backData.id =  rankData[i].ConfigID;\r\n                backData.cup = rankData[i].DivisionLevel;\r\n                backData.star = 0;\r\n                backData.rankName = rankData[i].LittleName;\r\n                return backData;\r\n            }\r\n        }\r\n    },\r\n\r\n    getLianXiChangStation: function (gameId){\r\n        var sortFunction = function (stStation1, stStation2){\r\n            return stStation1.dwRuleID - stStation2.dwRuleID;\r\n        }\r\n\r\n        var gameLibSink  =  require('GameLibSink').getInstance();\r\n        var gameLib =  gameLibSink.getGameLib();\r\n        var pStationList = gameLib.getStationList();\r\n        var size = pStationList.length;\r\n        var pLianXiStaionList=[];\r\n        for (var i=0;i < size;i++){\r\n            if(pStationList[i].dwParentID == gameId)\r\n            {\r\n                pLianXiStaionList.push(pStationList[i])\r\n            }\r\n        }\r\n        if (pLianXiStaionList.length > 1) {\r\n            pLianXiStaionList.sort(sortFunction)\r\n        }\r\n        return pLianXiStaionList\r\n    },\r\n\r\n    enterGameRoomBeanByStaionName:function(stationName,onCallBack){\r\n        var gameLib =  require('GameLibSink').getInstance().getGameLib();\r\n        var publicUserInfo = require(\"HallControl\").getInstance().getPublicUserInfo();\r\n        var pStationList = gameLib.getStationList();\r\n        var size = pStationList.length;\r\n        var room = null;\r\n        for (var i=0;i <size;i++) {\r\n            var szStationName = pStationList[i].szStationName;\r\n            if (szStationName==stationName) {\r\n                room = pStationList[i];\r\n                break\r\n            }\r\n        }\r\n        this.removeLoading();\r\n        if (room) {\r\n            if ((publicUserInfo.nGold && (publicUserInfo.nGold < 0))||(room.dwMinGold>publicUserInfo.nGold)) {\r\n                if (onCallBack) {\r\n                    onCallBack(room.dwMinGold);\r\n                }\r\n                else{\r\n                    console.log(\"金币不足\");\r\n                    TSCommon.dispatchEvent(HallResources.onShowFlyMessage,[\"金币不足\"]);\r\n                    TSCommon.dispatchEvent(HallResources.onNoEnoughGold, true );\r\n                }\r\n                return;\r\n            }\r\n            this.showLoading();\r\n            console.log(\"成功执行进入游戏\");\r\n            gameLib.autoEnterGameRoom(room.szStationName);\r\n        }\r\n        else{\r\n           console.log(\"找不到符合的服务器\");\r\n        }\r\n    },\r\n\r\n    playButtonEffect : function(){\r\n        if (parseInt(cc.sys.localStorage.getItem(\"voiceEffect\") || 0)){\r\n            var audioUrl = \"resources/sound/button.mp3\";\r\n            cc.audioEngine.play(cc.url.raw(audioUrl));\r\n        }\r\n    },\r\n\r\n    playCloseEffect : function(){\r\n        if (parseInt(cc.sys.localStorage.getItem(\"voiceEffect\") || 0)){\r\n            var audioUrl = \"resources/sound/close.mp3\";\r\n            cc.audioEngine.play(cc.url.raw(audioUrl));\r\n        }\r\n    },\r\n\r\n    showGoldTips:function(msg, isFlyUp, isShowIcon, offsetY){\r\n        offsetY = offsetY || 30;\r\n        var scene = cc.director.getScene();\r\n    \r\n        if(scene.getChildByTag(HallResources.COMMON_FLY_TIPS)){\r\n            return;\r\n        }\r\n    \r\n        var winSize = cc.director.getWinSize();\r\n        var toastNode = new cc.Node();\r\n    \r\n        var toastSprite = toastNode.addComponent(cc.Sprite);\r\n        cc.loader.loadRes(\"texture/commonRes/commontipsBg\",cc.SpriteFrame, function (err, spriteFrame){\r\n            if(!err){\r\n                toastSprite.spriteFrame = spriteFrame;\r\n            }\r\n        });\r\n        \r\n        if (isShowIcon) {\r\n            var iconNode = new cc.Node();\r\n            var iconSprite = iconNode.addComponent(cc.Sprite);\r\n            cc.loader.loadRes(\"texture/commonRes/money/goldCoin\", cc.SpriteFrame, function(err, spriteFrame){\r\n                if(!err){\r\n                    iconSprite.spriteFrame = spriteFrame;\r\n                }\r\n            })\r\n        \r\n        iconNode.anchorX = 1;\r\n    \r\n        iconNode.x = -8;\r\n        toastNode.addChild(iconNode);\r\n        }\r\n        var tipsNode = new cc.Node();\r\n        var tipsLabel = tipsNode.addComponent(cc.Label);\r\n        tipsLabel.string = msg;\r\n        tipsLabel.fontSize = 30;\r\n\r\n        if(!isShowIcon){\r\n            tipsNode.anchorX = 0.5;\r\n            tipsNode.x = 0;\r\n            tipsNode.y = -5;\r\n        }\r\n        else{\r\n            tipsNode.anchorX = 0;\r\n            tipsNode.x = 8;\r\n            tipsNode.y = -5;\r\n        }\r\n        \r\n    \r\n        \r\n        toastNode.addChild(tipsNode);\r\n    \r\n    \r\n        var delayTime = cc.delayTime(1);\r\n        var fadeOut = cc.fadeOut(2);\r\n        var moveBy = cc.moveBy(1, 0, offsetY);\r\n        var onEnd = cc.callFunc(()=>{\r\n            toastNode.stopAction();\r\n            toastNode.removeFromParent(true);\r\n        })\r\n        var sequence;\r\n        if(isFlyUp){\r\n            var spawn = cc.spawn(fadeOut, moveBy)\r\n            sequence = cc.sequence(delayTime, spawn, onEnd);\r\n        }\r\n        else{\r\n            sequence = cc.sequence(delayTime, fadeOut, onEnd);\r\n        }\r\n        \r\n        toastNode.runAction(sequence);\r\n        toastNode.x = winSize.width / 2;\r\n        toastNode.y = winSize.height / 2;\r\n        scene.addChild(toastNode, 1, HallResources.COMMON_FLY_TIPS);\r\n    },\r\n\r\n    getEnterBestRoom:function(gameName){\r\n        var server = null;\r\n        var dwFocusStationID = -1;\r\n        var nMinGold = 0;\r\n        var gameLibSink  =  require('GameLibSink').getInstance();\r\n        var gameLib =  gameLibSink.getGameLib();\r\n        var logonInfo = gameLib.getUserLogonInfo()\r\n\r\n        if (logonInfo == null) {\r\n            console.log(\"----------------------logonInfo = null\")\r\n            return;\r\n        }\r\n        var pRoomList = gameLib.getStationList();\r\n        var size = pRoomList.length;\r\n        var sortFunction = function (stStation1, stStation2){\r\n            return stStation1.dwMinGold - stStation2.dwMinGold;\r\n        }\r\n        pRoomList.sort(sortFunction)\r\n\r\n        for (var i = 0;i < size;i++) {\r\n            var room = pRoomList[i];\r\n            if (((gameName == \"yjly\") && (room.dwRuleID < 10))|| ((gameName == \"cxz\") && (room.dwRuleID > 10)))\r\n            {\r\n                var bContinues = true;\r\n                if (dwFocusStationID != -1) {\r\n                    if (room.dwStationID != dwFocusStationID) {\r\n                        bContinues = false;\r\n                    }\r\n                }\r\n\r\n                if (bContinues == true) { \r\n                    if ((room.dwMinGold != 0) && (room.dwMinGold > logonInfo.dwGold)) {\r\n                        bContinues = false;\r\n                    }\r\n\r\n                    if (bContinues == true) { \r\n                        if (server == null) {\r\n                            server = room;\r\n                        }\r\n\r\n                        var nTempMinGold = room.dwMinGold\r\n                        if (nTempMinGold > nMinGold) {\r\n                            server = room;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return server;\r\n    },\r\n});\r\n\r\nHallResources.recordList = {\r\n    register_success : 10,   //完成注册\r\n    main_res_start : 20,     //开始加载资源\r\n    main_res_end : 30,       //完成资源加载\r\n    choose_method : 40,      //选择玩法\r\n    enter_room : 50,         //进入房间\r\n    room_res_start : 60,     //开始加载房间资源\r\n    room_res_end : 70,       //完成加载房间资源\r\n    click_ready : 80,        //点击开始准备按钮\r\n    click_card : 90,         //点第一张牌\r\n    click_discard : 100,     //出第一张牌\r\n    count_page : 110,        //弹出结算页面\r\n    \r\n}\r\n\r\n//记录玩家流程\r\nHallResources.recordPlayerLogToServer = function(recordID){\r\n    var PublicUserInfo = require('HallControl').getInstance().getPublicUserInfo();\r\n    if(parseInt(PublicUserInfo.isNewUser) == 1){\r\n        require('HallWebRequest').getInstance().reportRecordLogToServer(recordID);\r\n    }\r\n}\r\n\r\nHallResources.COMMON_FLY_TIPS = 100\r\nHallResources.onLoginFinish = \"onLoginFinish\";\r\nHallResources.onGoldOrDiamondChanged = \"changeMoney\";\r\nHallResources.onNoEnoughGold = \"noMoneyEvent\";\r\nHallResources.onShowLoadingNode = \"showloadingNode\";\r\nHallResources.onClearLoadingNode = \"clearloadingNode\";\r\nHallResources.onClearDailyLoginRedPoint = \"clearDailyLoginRedPoint\";\r\nHallResources.onGetMoreDeskBg = \"getMoreDeskBg\";\r\nHallResources.onClearCollectionLoginRedPoint = \"clearCollectionLoginRedPoint\";\r\nHallResources.onClearConsecutiveRedPoint = \"clearConsecutiveRedPoint\";\r\nHallResources.onShowFlyMessage = \"showFlyMessage\";\r\nHallResources.openBgMusic = \"OPEN_HALL_BG_MUSIC\";\r\nHallResources.closeBgMusic = \"CLOSE_HALL_BG_MUSIC\";\r\nHallResources.onRefreshPlayerDiamondCount = \"refreshPlayerDiamondCount\";\r\nHallResources.onChangeShadow = \"removeShadow\";\r\nHallResources.onChangePlayerQualifyingScore = \"changePlayerQualifyingScore\";\r\nHallResources.onSeasonLevelUp = \"seasonLevelUp\";\r\n\r\nHallResources.groupShareImgUrl = \"http://h5cxz.ss2007.com/cxzImg/qun_rank_share.jpg\";\r\nHallResources.shareImgUrl = \"http://h5cxz.ss2007.com/cxzImg/deskbg_share.jpg\";\r\nHallResources.rupShareImgUrl = \"http://h5cxz.ss2007.com/cxzImg/bankRupt_share.png\";\r\nHallResources.resultShareImgUrl = \"http://h5cxz.ss2007.com/cxzImg/game_result_share.jpg\";\r\nHallResources.protectScoreShareImgUrl = \"http://h5cxz.ss2007.com/cxzImg/protect_score_share.png\";\r\nHallResources.upgradeShareImgUrl = \"http://h5cxz.ss2007.com/cxzImg/match_upgrade_share.png\";\r\n\r\nHallResources.shareWin_3 = \"http://h5cxz.ss2007.com/cxzImg/shareCount_3.jpg\";\r\nHallResources.shareWin_5 = \"http://h5cxz.ss2007.com/cxzImg/shareCount_5.jpg\";\r\nHallResources.shareWin_7 = \"http://h5cxz.ss2007.com/cxzImg/shareCount_7.jpg\";\r\nHallResources.shareWin_9 = \"http://h5cxz.ss2007.com/cxzImg/shareCount_9.jpg\";\r\n\r\nHallResources.getInstance = function () {\r\n    if (HallResources.instance == null) {\r\n        HallResources.instance = new HallResources();\r\n    }\r\n    return HallResources.instance;\r\n};\r\n\r\nmodule.exports = HallResources;"]}