{"version":3,"sources":["PersonalInfoFrame.js"],"names":["GameLibSink","require","cc","Class","extends","Component","properties","bg","default","type","Node","face_icon","sex","name_label","id_label","ip_label","local_info_label","onLoad","node","on","EventType","TOUCH_START","onTouch","active","event","point","touch","getLocation","convertPoint","convertToNodeSpace","size","getContentSize","rect","width","height","rectContainsPoint","onDestroy","off","init","playerInfo","m_playerInfo","setUserInfo","userSex","getSex","name","getUserName","userID","getUserDBID","ip","imgurl","self","loader","load","url","err","texture","getComponent","Sprite","spriteFrame","SpriteFrame","sexFame","gamelibcommon","SX_BOY","loadRes","Label","string"],"mappings":"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","file":"PersonalInfoFrame.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\scripts\\hall\\game\\desk","sourcesContent":["\r\nvar GameLibSink = require(\"GameLibSink\");\r\n\r\nimport { gamelibcommon } from \"../../gamelib/gamelibcommon\";\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        bg: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n\r\n        face_icon: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n\r\n        sex: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n\r\n        name_label: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n\r\n        id_label: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n\r\n        ip_label: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n\r\n        local_info_label: {\r\n            default: null,\r\n            type: cc.Node,\r\n        }\r\n    },\r\n\r\n    onLoad: function () {\r\n        this.node.on(cc.Node.EventType.TOUCH_START, this.onTouch, this);\r\n\r\n        this.local_info_label.active = false;\r\n    },\r\n\r\n    onTouch: function (event) {\r\n\r\n        var point = event.touch.getLocation();\r\n\r\n        var convertPoint = this.bg.convertToNodeSpace(point);\r\n\r\n        var size = this.bg.getContentSize();\r\n\r\n        var rect = cc.rect(0, 0, size.width, size.height);\r\n\r\n        if (!cc.rectContainsPoint(rect, convertPoint)) {\r\n            this.node.active = false;\r\n        }\r\n    },\r\n\r\n    onDestroy: function () {\r\n        this.node.off(cc.Node.EventType.TOUCH_START, this.onTouch, this);\r\n    },\r\n\r\n    init: function (playerInfo) {\r\n        this.m_playerInfo = playerInfo;\r\n        this.setUserInfo()\r\n    },\r\n\r\n    //设置用户信息\r\n    setUserInfo: function () {\r\n\r\n        var userSex = this.m_playerInfo.getSex();\r\n\r\n        var name = this.m_playerInfo.getUserName();\r\n\r\n        var userID = this.m_playerInfo.getUserDBID();\r\n\r\n        var ip = this.m_playerInfo.getLocation();\r\n\r\n        var imgurl = this.m_playerInfo.imgurl;\r\n\r\n        var self = this;\r\n        if(imgurl){\r\n            cc.loader.load({ url: imgurl, type: \"jpg\" }, function (err, texture) {\r\n                self.face_icon.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\r\n                //self.face_icon.setScale(0.45);\r\n    \r\n            });\r\n        }\r\n        \r\n        var sexFame;\r\n        //表示是男的\r\n        if (userSex == gamelibcommon.SX_BOY) {\r\n            cc.loader.loadRes(\"texture/game/player/male\", cc.SpriteFrame, function(err, spriteFrame){\r\n                self.sex.getComponent(cc.Sprite).spriteFrame = spriteFrame;\r\n            })\r\n        }\r\n        else {\r\n            cc.loader.loadRes(\"texture/game/player/female\", cc.SpriteFrame, function(err, spriteFrame){\r\n                self.sex.getComponent(cc.Sprite).spriteFrame = spriteFrame; \r\n            })\r\n        }\r\n\r\n        if (sexFame) {\r\n            this.sex.getComponent(cc.Sprite).spriteFrame = sexFame;\r\n        }\r\n\r\n        this.name_label.getComponent(cc.Label).string = name;\r\n\r\n        this.id_label.getComponent(cc.Label).string = userID;\r\n\r\n        this.ip_label.getComponent(cc.Label).string = ip;\r\n    },\r\n});\r\n"]}