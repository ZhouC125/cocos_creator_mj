{"version":3,"sources":["gameSetting.js"],"names":["GameCfg","require","setting","extends","cc","Component","properties","bg","default","type","Node","music_open","music_close","effect_open","effect_close","shock_open","shock_close","deskBgTableView","settingAtlas","SpriteAtlas","start","onLoad","node","on","EventType","TOUCH_START","onTouch","windowSize","view","getVisibleSize","getChildByName","setContentSize","onEnable","index","sys","localStorage","getItem","bgPageView","getComponent","PageView","removeAllPages","publicUserInfo","getInstance","getPublicUserInfo","tableInfo","tableBoardInfo","selectIndex","i","length","bgNode","bgSprite","addComponent","Sprite","frameName","parseInt","TableBoardNo","spriteFrame","getSpriteFrame","IsUsed","addPage","scrollToPage","active","bgMusicOpen","voiceEffectOpen","event","log","point","touch","getLocation","convertPoint","convertToNodeSpace","size","getContentSize","rect","width","height","rectContainsPoint","hide","closeAndChangeScaleAction","self","HallResources","TSCommon","dispatchEvent","onChangeShadow","onCloseClicked","playCloseEffect","onPageChanged","getCurrentPageIndex","IsGet","szData","userDBID","encryptPassword","httpCallback","success","data","removeLoading","jsonObject","JSON","parse","retCode","RetCode","changeDeskBg","httpRequest","onGetMoreDeskBgBtnClicked","scene","director","getScene","name","ShowToast","onGetMoreDeskBg","openMusic","setItem","closeBgMusic","closeMusic","openBgMusic","openEffect","closeEffect","openShock","closeShock","changeMajiang","Class"],"mappings":"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","file":"gameSetting.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\scripts\\hall\\game\\settting","sourcesContent":["\r\nimport { TSCommon } from \"../../TSCommon\";\r\n\r\nvar GameCfg = require(\"GameCfg\");\r\nvar setting = {\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        bg: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n\r\n        music_open: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n\r\n        music_close: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n\r\n        effect_open: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n\r\n        effect_close: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n\r\n        shock_open: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n\r\n        shock_close: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n\r\n        deskBgTableView: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n\r\n        settingAtlas: {\r\n            default: null,\r\n            type: cc.SpriteAtlas,\r\n        },\r\n    },\r\n\r\n    start() {\r\n\r\n    },\r\n\r\n    //界面载入\r\n    onLoad: function () {\r\n        this.node.on(cc.Node.EventType.TOUCH_START, this.onTouch, this);\r\n\r\n        var windowSize=cc.view.getVisibleSize();\r\n        //主界面不显示\r\n        if (this.node.getChildByName(\"shadow_bg\"))\r\n        {\r\n            this.node.getChildByName(\"shadow_bg\").setContentSize(windowSize);\r\n        }\r\n    },\r\n\r\n    onEnable: function () {\r\n        var index = cc.sys.localStorage.getItem(\"deskBg\", index) || 0;\r\n\r\n        var bgPageView = this.node.getChildByName(\"deskBg_select_scrollView\").getComponent(cc.PageView);\r\n\r\n        /*\r\n        index = parseInt(index);\r\n\r\n        if (index < 0) {\r\n            index = 0;\r\n        }\r\n\r\n        if (index > 2) {\r\n            index = 2;\r\n        }\r\n\r\n        bgPageView.scrollToPage(index, 0.1);\r\n        */\r\n        bgPageView.removeAllPages();\r\n\r\n\r\n        var publicUserInfo = require(\"HallControl\").getInstance().getPublicUserInfo();\r\n\r\n        var tableInfo = publicUserInfo.tableBoardInfo;\r\n\r\n        var selectIndex = 0;\r\n\r\n        for (var i = 0; i < tableInfo.length; i++) {\r\n            var bgNode = new cc.Node();\r\n            var bgSprite = bgNode.addComponent(cc.Sprite);\r\n            var frameName = \"bg\" + (parseInt(tableInfo[i].TableBoardNo) + 1);\r\n            bgSprite.spriteFrame = this.settingAtlas.getSpriteFrame(frameName)\r\n\r\n            if (parseInt(tableInfo[i].IsUsed) == 1) {\r\n                selectIndex = i;\r\n            }\r\n            bgPageView.addPage(bgNode);\r\n        }\r\n\r\n        bgPageView.scrollToPage(selectIndex, 0.1);\r\n\r\n        this.node.getChildByName(\"deskBg_mask\").active = false;\r\n        this.node.getChildByName(\"get_deskbg_btn\").active = false;\r\n        var bgMusicOpen = parseInt(cc.sys.localStorage.getItem(\"bgMusic\") || 0);\r\n        if (bgMusicOpen) {\r\n            this.music_open.active = true;\r\n            this.music_close.active = false;\r\n        }\r\n        else {\r\n            this.music_open.active = false;\r\n            this.music_close.active = true;\r\n        }\r\n\r\n        var voiceEffectOpen = parseInt(cc.sys.localStorage.getItem(\"voiceEffect\") || 0);\r\n        if (voiceEffectOpen) {\r\n            this.effect_open.active = true;\r\n            this.effect_close.active = false;\r\n        }\r\n        else {\r\n            this.effect_open.active = false;\r\n            this.effect_close.active = true;\r\n        }\r\n    },\r\n\r\n    onTouch: function (event) {\r\n        cc.log(\"onTouch\");\r\n        var point = event.touch.getLocation();\r\n        var convertPoint = this.bg.convertToNodeSpace(point);\r\n        var size = this.bg.getContentSize();\r\n        var rect = cc.rect(0, 0, size.width, size.height);\r\n\r\n        if (!cc.rectContainsPoint(rect, convertPoint)) {\r\n            this.hide();\r\n        }\r\n    },\r\n\r\n    hide: function () {\r\n        // this.node.active = false;\r\n        this.closeAndChangeScaleAction();\r\n    },\r\n\r\n    closeAndChangeScaleAction(){\r\n        var self = this;\r\n        self.node.active = false;\r\n        var HallResources = require(\"HallResources\");\r\n        TSCommon.dispatchEvent(HallResources.onChangeShadow,false);\r\n        // var action1 = cc.scaleTo(0.2, 0.3, 0.3);\r\n        // var action2 =cc.fadeOut(0.01);\r\n        \r\n        // var action3 = cc.callFunc(function(){\r\n        //     self.node.active = false;\r\n        // });\r\n        // var sequence = cc.sequence(action1, action2, action3);\r\n        // this.node.runAction(sequence);\r\n    },\r\n\r\n    onCloseClicked: function () {\r\n        require('HallResources').getInstance().playCloseEffect();\r\n        this.hide();\r\n    },\r\n\r\n    onPageChanged: function (event) {\r\n\r\n        var index = event.getCurrentPageIndex();\r\n\r\n        var publicUserInfo = require(\"HallControl\").getInstance().getPublicUserInfo();\r\n\r\n        var tableInfo = publicUserInfo.tableBoardInfo;\r\n\r\n        this.node.getChildByName(\"deskBg_mask\").active = parseInt(tableInfo[index].IsGet) == 1 ? false : true;\r\n        this.node.getChildByName(\"get_deskbg_btn\").active = parseInt(tableInfo[index].IsGet) == 1 ? false : true;\r\n\r\n        var self = this;\r\n\r\n        var szData = \"UserID=\" + publicUserInfo.userDBID + \"&EPassword=\" +  publicUserInfo.encryptPassword + \"&TableBoardNo=\" + index + \"&apptype=1\";\r\n        var httpCallback = function(success, data){\r\n            require('HallResources').getInstance().removeLoading();\r\n            if(success){\r\n                var jsonObject = JSON.parse(data);\r\n                var retCode = jsonObject.RetCode;\r\n                if(parseInt(retCode) == 1){\r\n                    TSCommon.dispatchEvent(GameCfg.changeDeskBg, index);\r\n                    self.changeDeskBg(index);\r\n                }\r\n            }\r\n        }\r\n\r\n        require('HallWebRequest').getInstance().httpRequest(\"SetUserTableBoard.aspx\", szData, httpCallback);\r\n    },\r\n\r\n\r\n    \r\n    onGetMoreDeskBgBtnClicked:function(event){\r\n        var scene = cc.director.getScene();\r\n        if(scene.name == \"XueLiuGameScene\"){\r\n            require(\"Resources\").ShowToast(\"您正在游戏中,无法进行此操作,请先返回大厅!\")\r\n        }\r\n        else{\r\n            var HallResources = require(\"HallResources\");\r\n            TSCommon.dispatchEvent(HallResources.onGetMoreDeskBg, null);\r\n            this.node.active = false;\r\n        }\r\n    },\r\n\r\n    //打开背景音乐\r\n    openMusic: function () {\r\n        //cc.log(\"open music\")\r\n        var HallResources = require(\"HallResources\");\r\n        this.music_open.active = false;\r\n        this.music_close.active = true;\r\n\r\n        cc.sys.localStorage.setItem(\"bgMusic\", 0);\r\n        TSCommon.dispatchEvent(GameCfg.closeBgMusic, null);\r\n        TSCommon.dispatchEvent(HallResources.closeBgMusic, null);\r\n    },\r\n\r\n    //关闭背景音乐\r\n    closeMusic: function () {\r\n        var HallResources = require(\"HallResources\");\r\n        this.music_open.active = true;\r\n        this.music_close.active = false;\r\n\r\n        cc.sys.localStorage.setItem(\"bgMusic\", 1);\r\n        TSCommon.dispatchEvent(GameCfg.openBgMusic, null);\r\n        TSCommon.dispatchEvent(HallResources.openBgMusic, null);\r\n    },\r\n\r\n    //打开音效\r\n    openEffect: function () {\r\n\r\n        cc.sys.localStorage.setItem(\"voiceEffect\", 0);\r\n        this.effect_open.active = false;\r\n        this.effect_close.active = true;\r\n    },\r\n\r\n    //关闭音效\r\n    closeEffect: function () {\r\n\r\n        cc.sys.localStorage.setItem(\"voiceEffect\", 1);\r\n        this.effect_open.active = true;\r\n        this.effect_close.active = false;\r\n    },\r\n\r\n    //打开震动\r\n    openShock: function () {\r\n        this.shock_open.active = false;\r\n        this.shock_close.active = true;\r\n    },\r\n\r\n    //关闭震动\r\n    closeShock: function () {\r\n        this.shock_open.active = true;\r\n        this.shock_close.active = false;\r\n    },\r\n\r\n    //切换桌面背景\r\n    changeDeskBg: function (index) {\r\n        \r\n        var publicUserInfo = require(\"HallControl\").getInstance().getPublicUserInfo();\r\n\r\n        var tableInfo = publicUserInfo.tableBoardInfo;\r\n\r\n        for (var i = 0; i < tableInfo.length; i++) {\r\n        \r\n            if(parseInt(tableInfo[i].TableBoardNo) == index){\r\n                tableInfo[i].IsUsed = 1;\r\n            }\r\n            else{\r\n               tableInfo[i].IsUsed = 0\r\n            }\r\n        }\r\n\r\n        cc.sys.localStorage.setItem(\"deskBg\", index);\r\n    },\r\n\r\n    //麻将改变时调用\r\n    changeMajiang: function () {\r\n\r\n    },\r\n}\r\n\r\ncc.Class(setting);\r\n"]}