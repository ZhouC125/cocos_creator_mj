{"version":3,"sources":["ToastUI.js"],"names":["ToastUI","cc","Class","extends","Component","ctor","_RUN_TIMER","_contentLabelWidth","_contentLabelHeight","LABEL_MAX_WIDTH","strMsg","properties","_fillSp","default","type","Sprite","_contentLabel","Label","onLoad","winSize","director","getWinSize","self","nodeSp","Node","node","addChild","addComponent","Type","SLICED","setPosition","width","height","nodeContentLabel","string","setOpacity","loader","loadRes","SpriteFrame","err","spriteFrame","setFillSlice","runAction","fadeIn","schedule","destroy","setMsg","calContentLabelSize","start","update","dt","onDestroy","module","exports"],"mappings":"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","file":"ToastUI.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\scripts\\hall\\control","sourcesContent":["\r\nvar ToastUI= cc.Class({\r\n    extends: cc.Component,\r\n    ctor:function()\r\n    {   \r\n        this._RUN_TIMER = 2;\r\n        this._contentLabelWidth = 0;\r\n        this._contentLabelHeight = 0;\r\n\r\n        this.LABEL_MAX_WIDTH = 300;\r\n        this.strMsg = \"\";\r\n    },\r\n    properties: {\r\n        _fillSp:{\r\n            default:null,\r\n            type:cc.Sprite,\r\n        },\r\n        _contentLabel:{\r\n            default:null,\r\n            type:cc.Label,\r\n        },\r\n    },\r\n\r\n    onLoad:function(){\r\n\r\n        var winSize = cc.director.getWinSize();\r\n        var self = this ;\r\n\r\n        var nodeSp = new cc.Node('nodeSp');\r\n        this.node.addChild(nodeSp);\r\n        this._fillSp = nodeSp.addComponent(cc.Sprite);\r\n        this._fillSp.type = cc.Sprite.Type.SLICED;\r\n        this._fillSp.node.setPosition(winSize.width/2, winSize.height/2);\r\n\r\n        var nodeContentLabel = new cc.Node('nodeContentLabel');\r\n        this.nodeContentLabel = nodeContentLabel;\r\n        this._contentLabel = nodeContentLabel.addComponent(cc.Label);\r\n        nodeSp.addChild(nodeContentLabel);\r\n        this._contentLabel.string = this.strMsg;\r\n        self._fillSp.node.setOpacity(0);\r\n        cc.loader.loadRes('hallRes/toast',cc.SpriteFrame,function(err,spriteFrame){\r\n            if(!err)\r\n            {\r\n                self._fillSp.spriteFrame = spriteFrame;\r\n                self.setFillSlice();\r\n            }\r\n        });\r\n\r\n        self._fillSp.node.runAction(cc.fadeIn(0.5));\r\n\r\n        this.schedule(function(){\r\n            this.node.destroy();\r\n        }, 0,0, this._RUN_TIMER);\r\n    },\r\n\r\n    setMsg:function(strMsg)\r\n    {\r\n        this.strMsg = strMsg;\r\n        if(this._contentLabel)\r\n        {\r\n            this._contentLabel.string = this.strMsg;\r\n            this.setFillSlice();\r\n        }\r\n    },\r\n\r\n    calContentLabelSize:function()\r\n    {\r\n        if(this._contentLabel)\r\n        {\r\n            this._contentLabelWidth = this._contentLabel.node.width;\r\n            this._contentLabelHeight = this._contentLabel.node.height;\r\n        }\r\n    },\r\n\r\n    setFillSlice:function()\r\n    {\r\n        this.calContentLabelSize();\r\n        if(this._fillSp)\r\n        {\r\n            this._fillSp.node.width = this._contentLabelWidth;\r\n        }\r\n    },\r\n\r\n    start:function(){\r\n    },\r\n\r\n    update:function(dt){\r\n    },\r\n\r\n    onDestroy:function()\r\n    {\r\n        \r\n    },\r\n});\r\n\r\ncc.ToastUI= module.exports = ToastUI;"]}