{"version":3,"sources":["ClientFrameSink.js"],"names":["ClientFrameSink","cc","Class","ctor","m_dataEventHandler","onSceneChanged","data","emit","callback","TSCommon","performWithDelay","N_DELAYTIME","onPlayerStateChanged","chair","oldState","newState","nOldState","nNewState","onGetMainVersion","onGetSubVersion","onGameStart","onGameMessage","cbCmdID","cCmdID","onGameEnd","onGameOption","option","onUserEnterTable","wUserID","isPlayer","log","onUserExitTable","onNotEnoughGold","nMinGold","nMaxGold","onTableSound","nChair","pBuf","onGameSystemMsg","msg","module","exports"],"mappings":"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","file":"ClientFrameSink.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\scripts\\hall\\game","sourcesContent":["ï»¿\r\nimport { ByteArray } from \"../common/ByteArray\";\r\nimport {CGameLib} from \"../gamelib/CGameLib\";\r\nimport {TSCommon} from \"../TSCommon\";\r\nvar  ClientFrameSink = cc.Class({\t \r\n    ctor:function()\r\n    {\r\n        this.m_dataEventHandler = null;\r\n    },\r\n    onSceneChanged:function(data){\r\n        \r\n\t\tif(this.m_dataEventHandler){\r\n\t\t\tthis.m_dataEventHandler.emit(\"onSceneChanged\", {data:data})\r\n        }\r\n        else{\r\n            var callback = function(){\r\n                this.onSceneChanged(data)\r\n            };\r\n            TSCommon.performWithDelay(this, callback, ClientFrameSink.N_DELAYTIME);\r\n        }\r\n\r\n    },\r\n    onPlayerStateChanged:function(chair, oldState, newState){\r\n        \r\n        if(this.m_dataEventHandler){\r\n            this.m_dataEventHandler.emit(\"onPlayerStateChanged\", {\r\n                chair : chair,\r\n                nOldState : oldState,\r\n                nNewState : newState,\r\n            })\r\n        }\r\n        else{\r\n            var callback = function(){\r\n                this.onPlayerStateChanged(chair, oldState, newState)\r\n            };\r\n            TSCommon.performWithDelay(this, callback, ClientFrameSink.N_DELAYTIME);\r\n        }\r\n    },\r\n    onGetMainVersion:function(){\r\n        return 1;\r\n    },\r\n    onGetSubVersion:function(){\r\n        return 1;\r\n    },\r\n\r\n    onGameStart:function(){\r\n\r\n    },\r\n\r\n    onGameMessage:function(chair, cbCmdID, data){\r\n        \r\n\t\tif(this.m_dataEventHandler){\r\n\t\t\tthis.m_dataEventHandler.emit(\"onGameMessage\", {\r\n\t\t\t\tchair:chair, \r\n\t\t\t\tcCmdID:cbCmdID,\r\n\t\t\t\tdata:data,\r\n\t\t\t})\r\n        }\r\n        else{\r\n            var callback = function(){\r\n                this.onGameMessage(chair, cbCmdID, data)\r\n            };\r\n            TSCommon.performWithDelay(this, callback, ClientFrameSink.N_DELAYTIME);\r\n        }\r\n    },\r\n    onGameEnd:function(data){\r\n\r\n    },\r\n    onGameOption:function(option){\r\n\r\n    },\r\n    onUserEnterTable:function(chair, wUserID, isPlayer){\r\n        \r\n        if(this.m_dataEventHandler){\r\n            cc.log(\"onUserEnterTable ========\");\r\n            this.m_dataEventHandler.emit(\"onUserEnterTable\", {\r\n                chair:chair,\r\n                wUserID:wUserID,\r\n                isPlayer:isPlayer,\r\n            })\r\n        }\r\n        else{\r\n            var callback = function(){\r\n                this.onUserEnterTable(chair, wUserID, isPlayer)\r\n            }\r\n            TSCommon.performWithDelay(this, callback, ClientFrameSink.N_DELAYTIME);\r\n        }\r\n    },\r\n    onUserExitTable(chair, wUserID, isPlayer){   \r\n        cc.log(\"onUserExitTable ========\");\r\n        if(this.m_dataEventHandler){\r\n            this.m_dataEventHandler.emit(\"onUserExitTable\", {\r\n                chair:chair,\r\n                wUserID:wUserID,\r\n                isPlayer:isPlayer,\r\n            })\r\n        }\r\n        else{\r\n            var callback = function(){\r\n                this.onUserExitTable(chair, wUserID, isPlayer)\r\n            }\r\n            TSCommon.performWithDelay(this, callback, ClientFrameSink.N_DELAYTIME);\r\n        }\r\n    },\r\n    onNotEnoughGold:function(nMinGold, nMaxGold){\r\n\r\n    },\r\n    onTableSound:function(nChair, pBuf){\r\n\r\n    },\r\n    onGameSystemMsg:function(msg){\r\n\r\n    },\r\n});\r\n\r\nClientFrameSink.N_DELAYTIME = 1;\r\n\r\nmodule.exports = ClientFrameSink;"]}